õ
iD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\App_Start\BundleConfig.cs
	namespace 	
BusTicketWebApp
 
{ 
public 

static 
class 
BundleConfig $
{ 
public		 
static		 
void		 
RegisterBundles		 *
(		* +
BundleCollection		+ ;
bundles		< C
)		C D
{

 	
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) ;
); <
.< =
Include= D
(D E
$str 7
)7 8
)8 9
;9 :
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str 4
)4 5
)5 6
;6 7
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str /
)/ 0
)0 1
;1 2
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str ,
,, -
$str 8
,8 9
$str ;
) 
) 
; 
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) ;
); <
.< =
Include= D
(D E
$strE W
)W X
)X Y
;Y Z
bundles   
.   
Add   
(   
new   
StyleBundle   '
(  ' (
$str  ( 7
)  7 8
.  8 9
Include  9 @
(  @ A
$str!! )
,!!) *
$str"" 8
,""8 9
$str## 5
,##5 6
$str$$ 0
,$$0 1
$str%% $
))) 
))) 
;)) 
}** 	
}++ 
},, Ø
iD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\App_Start\FilterConfig.cs
	namespace 	
BusTicketWebApp
 
{ 
public 

static 
class 
FilterConfig $
{ 
public 
static 
void !
RegisterGlobalFilters 0
(0 1"
GlobalFilterCollection1 G
filtersH O
)O P
{		 	
filters

 
.

 
Add

 
(

 
new

  
HandleErrorAttribute

 0
(

0 1
)

1 2
)

2 3
;

3 4
} 	
} 
} ˘
hD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\App_Start\RouteConfig.cs
	namespace 	
BusTicketWebApp
 
{		 
public

 

class

 
RouteConfig

 
{ 
public 
static 
void 
RegisterRoutes )
() *
RouteCollection* 9
routes: @
)@ A
{ 	
routes 
. 
IgnoreRoute 
( 
$str ;
); <
;< =
routes 
. 
MapRoute 
( 
name 
: 
$str 
,  
url 
: 
$str 1
,1 2
defaults 
: 
new 
{ 

controller  *
=+ ,
$str- 3
,3 4
action5 ;
=< =
$str> E
,E F
idG I
=J K
UrlParameterL X
.X Y
OptionalY a
}b c
) 
; 
} 	
} 
} ∆
oD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Controllers\ErrorsController.cs
	namespace 	
BusTicketWebApp
 
. 
Controllers %
{ 
public		 

class		 
ErrorsController		 !
:		" #

Controller		$ .
{

 
public 
ActionResult 
PageNotFound (
(( )
)) *
{ 	
return 
View 
( 
) 
; 
} 	
} 
} …«
oD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Controllers\MemberController.cs
	namespace 	
BusTicketWebApp
 
. 
Controllers %
{ 
public 

class 
MemberController !
:" #

Controller$ .
{ 
private 
readonly 
string 
_baseAddressOrder  1
=2 3
$str4 j
;j k
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
Search "
(" #
)# $
{ 	
if 
( 
Session 
[ 
$str 
]  
==! #
null$ (
)( )
{ 
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 7
)7 8
;8 9
} 
Session 
[ 
$str 
] 
= 
null "
;" #
return!! 
View!! 
(!! 
)!! 
;!! 
}"" 	
[## 	
HttpGet##	 
]## 
public$$ 
ActionResult$$ 
SearchResult$$ (
($$( )
)$$) *
{%% 	
Session&& 
[&& 
$str&& 
]&& 
=&& 
null&& "
;&&" #
return'' 
View'' 
('' 
)'' 
;'' 
}(( 	
[)) 	
HttpPost))	 
])) 
public** 
ActionResult** 
SearchResult** (
(**( )
FormCollection**) 7
fc**8 :
)**: ;
{++ 	
if,, 
(,, 
Session,, 
[,, 
$str,, 
],,  
==,,! #
null,,$ (
),,( )
{-- 
return.. 
RedirectToAction.. '
(..' (
$str..( /
,../ 0
$str..1 7
)..7 8
;..8 9
}// 
Session00 
[00 
$str00 
]00 
=00 
null00 "
;00" #
MemberSearchDto22 
memberSearchDto22 +
=22, -
new22. 1
MemberSearchDto222 A
(22A B
)22B C
;22C D
List44 
<44 

MemberList44 
>44 
searchLists44 (
=44) *
new44+ .
List44/ 3
<443 4

MemberList444 >
>44> ?
(44? @
)44@ A
;44A B
memberSearchDto55 
.55 
FromDate55 $
=55% &
$str55' )
;55) *
if66 
(66 
!66 
string66 
.66 
IsNullOrEmpty66 %
(66% &
fc66& (
[66( )
$str66) 5
]665 6
)666 7
)667 8
{77 
memberSearchDto88 
.88  
FromDate88  (
=88) *
fc88+ -
[88- .
$str88. :
]88: ;
;88; <
}99 
memberSearchDto:: 
.:: 
ToDate:: "
=::# $
$str::% '
;::' (
if;; 
(;; 
!;; 
string;; 
.;; 
IsNullOrEmpty;; %
(;;% &
fc;;& (
[;;( )
$str;;) 3
];;3 4
);;4 5
);;5 6
{<< 
memberSearchDto== 
.==  
ToDate==  &
===' (
fc==) +
[==+ ,
$str==, 6
]==6 7
;==7 8
}>> 
memberSearchDto?? 
.?? 
Email?? !
=??" #
$str??$ &
;??& '
if@@ 
(@@ 
!@@ 
String@@ 
.@@ 
IsNullOrEmpty@@ %
(@@% &
fc@@& (
[@@( )
$str@@) 5
]@@5 6
)@@6 7
)@@7 8
{AA 
memberSearchDtoBB 
.BB  
EmailBB  %
=BB& '
fcBB( *
[BB* +
$strBB+ 7
]BB7 8
;BB8 9
}CC 
memberSearchDtoDD 
.DD 
StatusIdDD $
=DD% &
$strDD' )
;DD) *
ifEE 
(EE 
!EE 
StringEE 
.EE 
IsNullOrEmptyEE %
(EE% &
fcEE& (
[EE( )
$strEE) 1
]EE1 2
)EE2 3
)EE3 4
{FF 
memberSearchDtoGG 
.GG  
StatusIdGG  (
=GG) *
fcGG+ -
[GG- .
$strGG. 6
]GG6 7
;GG7 8
}HH 
memberSearchDtoII 
.II 
LastNameII $
=II% &
$strII' )
;II) *
ifJJ 
(JJ 
!JJ 
StringJJ 
.JJ 
IsNullOrEmptyJJ %
(JJ% &
fcJJ& (
[JJ( )
$strJJ) 4
]JJ4 5
)JJ5 6
)JJ6 7
{KK 
memberSearchDtoLL 
.LL  
LastNameLL  (
=LL) *
fcLL+ -
[LL- .
$strLL. 9
]LL9 :
;LL: ;
}MM 
memberSearchDtoNN 
.NN 
	FirstNameNN %
=NN& '
$strNN( *
;NN* +
ifOO 
(OO 
!OO 
StringOO 
.OO 
IsNullOrEmptyOO %
(OO% &
fcOO& (
[OO( )
$strOO) 5
]OO5 6
)OO6 7
)OO7 8
{PP 
memberSearchDtoQQ 
.QQ  
	FirstNameQQ  )
=QQ* +
fcQQ, .
[QQ. /
$strQQ/ ;
]QQ; <
;QQ< =
}RR 
memberSearchDtoSS 
.SS 
PhoneNumberSS '
=SS( )
$strSS* ,
;SS, -
ifTT 
(TT 
!TT 
StringTT 
.TT 
IsNullOrEmptyTT %
(TT% &
fcTT& (
[TT( )
$strTT) 0
]TT0 1
)TT1 2
)TT2 3
{UU 
memberSearchDtoVV 
.VV  
PhoneNumberVV  +
=VV, -
fcVV. 0
[VV0 1
$strVV1 8
]VV8 9
;VV9 :
}WW 
memberSearchDtoXX 
.XX 
MemberIdXX $
=XX% &
$strXX' )
;XX) *
ifYY 
(YY 
!YY 
StringYY 
.YY 
IsNullOrEmptyYY %
(YY% &
fcYY& (
[YY( )
$strYY) 4
]YY4 5
)YY5 6
)YY6 7
{ZZ 
memberSearchDto[[ 
.[[  
MemberId[[  (
=[[) *
fc[[+ -
[[[- .
$str[[. 9
][[9 :
;[[: ;
}\\ 
memberSearchDto]] 
.]] 
FromToRegDate]] )
=]]* +
$str]], .
;]]. /
if^^ 
(^^ 
!^^ 
String^^ 
.^^ 
IsNullOrEmpty^^ %
(^^% &
fc^^& (
[^^( )
$str^^) 9
]^^9 :
)^^: ;
)^^; <
{__ 
memberSearchDto`` 
.``  
FromToRegDate``  -
=``. /
fc``0 2
[``2 3
$str``3 C
]``C D
;``D E
}aa 
usingbb 
(bb 
varbb 
clientbb 
=bb 
newbb  #

HttpClientbb$ .
(bb. /
)bb/ 0
)bb0 1
{cc 
clientdd 
.dd 
BaseAddressdd "
=dd# $
newdd% (
Uridd) ,
(dd, -
_baseAddressOrderdd- >
)dd> ?
;dd? @
vargg 
postTaskgg 
=gg 
clientgg %
.gg% &
PostAsJsonAsyncgg& 5
<gg5 6
MemberSearchDtogg6 E
>ggE F
(ggF G
$strggG N
,ggN O
memberSearchDtoggP _
)gg_ `
;gg` a
postTaskhh 
.hh 
Waithh 
(hh 
)hh 
;hh  
varjj 
resultjj 
=jj 
postTaskjj %
.jj% &
Resultjj& ,
;jj, -
ifkk 
(kk 
resultkk 
.kk 
IsSuccessStatusCodekk .
)kk. /
{ll 
varmm 
readTaskmm  
=mm! "
resultmm# )
.mm) *
Contentmm* 1
.mm1 2
ReadAsAsyncmm2 =
<mm= >
Listmm> B
<mmB C

MemberListmmC M
>mmM N
>mmN O
(mmO P
)mmP Q
;mmQ R
searchListsoo 
=oo  !
readTaskoo" *
.oo* +
Resultoo+ 1
;oo1 2
}qq 
}rr 
ViewBagtt 
.tt 
Statustt 
=tt 
GetTicketStatustt ,
(tt, -
)tt- .
;tt. /
returnvv 
Viewvv 
(vv 
searchListsvv #
)vv# $
;vv$ %
}ww 	
publicxx 
ActionResultxx 
MemberDetailsxx )
(xx) *
intxx* -
idxx. 0
)xx0 1
{yy 	
ifzz 
(zz 
Sessionzz 
[zz 
$strzz 
]zz  
==zz! #
nullzz$ (
)zz( )
{{{ 
return|| 
RedirectToAction|| '
(||' (
$str||( /
,||/ 0
$str||1 7
)||7 8
;||8 9
}}} 
Member 
member 
= 
new 
Member  &
(& '
)' (
;( )
Session
ÄÄ 
[
ÄÄ 
$str
ÄÄ 
]
ÄÄ 
=
ÄÄ 
$str
ÄÄ '
;
ÄÄ' (
using
ÇÇ 
(
ÇÇ 
var
ÇÇ 
client
ÇÇ 
=
ÇÇ 
new
ÇÇ  #

HttpClient
ÇÇ$ .
(
ÇÇ. /
)
ÇÇ/ 0
)
ÇÇ0 1
{
ÉÉ 
client
ÑÑ 
.
ÑÑ 
BaseAddress
ÑÑ "
=
ÑÑ# $
new
ÑÑ% (
Uri
ÑÑ) ,
(
ÑÑ, -
_baseAddressOrder
ÑÑ- >
)
ÑÑ> ?
;
ÑÑ? @
var
ÜÜ 
responseTask
ÜÜ  
=
ÜÜ! "
client
ÜÜ# )
.
ÜÜ) *
GetAsync
ÜÜ* 2
(
ÜÜ2 3
$str
ÜÜ3 ;
+
ÜÜ< =
id
ÜÜ> @
)
ÜÜ@ A
;
ÜÜA B
responseTask
áá 
.
áá 
Wait
áá !
(
áá! "
)
áá" #
;
áá# $
var
ââ 
result
ââ 
=
ââ 
responseTask
ââ )
.
ââ) *
Result
ââ* 0
;
ââ0 1
if
ää 
(
ää 
result
ää 
.
ää !
IsSuccessStatusCode
ää .
)
ää. /
{
ãã 
var
çç 
readTask
çç  
=
çç! "
result
çç# )
.
çç) *
Content
çç* 1
.
çç1 2
ReadAsAsync
çç2 =
<
çç= >
Member
çç> D
>
ççD E
(
ççE F
)
ççF G
;
ççG H
readTask
éé 
.
éé 
Wait
éé !
(
éé! "
)
éé" #
;
éé# $
member
êê 
=
êê 
readTask
êê %
.
êê% &
Result
êê& ,
;
êê, -
}
ëë 
}
ìì 
if
ïï 
(
ïï 
Convert
ïï 
.
ïï 
ToInt32
ïï 
(
ïï  
member
ïï  &
.
ïï& '
Status
ïï' -
)
ïï- .
==
ïï/ 1
$num
ïï2 3
)
ïï3 4
{
ññ 
member
óó 
.
óó 
	StatusTxt
óó  
=
óó! "
$str
óó# ,
;
óó, -
}
òò 
else
ôô 
{
öö 
member
õõ 
.
õõ 
	StatusTxt
õõ  
=
õõ! "
$str
õõ# ,
;
õõ, -
}
úú 
return
ûû 
View
ûû 
(
ûû 
member
ûû 
)
ûû 
;
ûû  
}
üü 	
public
†† 
List
†† 
<
†† 
TicketStatus
††  
>
††  !
GetTicketStatus
††" 1
(
††1 2
)
††2 3
{
°° 	
List
¢¢ 
<
¢¢ 
TicketStatus
¢¢ 
>
¢¢ 
_ticketStatus
¢¢ ,
=
¢¢- .
new
¢¢/ 2
List
¢¢3 7
<
¢¢7 8
TicketStatus
¢¢8 D
>
¢¢D E
(
¢¢E F
)
¢¢F G
;
¢¢G H
using
££ 
(
££ 
var
££ 
client
££ 
=
££ 
new
££  #

HttpClient
££$ .
(
££. /
)
££/ 0
)
££0 1
{
§§ 
client
•• 
.
•• 
BaseAddress
•• "
=
••# $
new
••% (
Uri
••) ,
(
••, -
_baseAddressOrder
••- >
)
••> ?
;
••? @
var
ßß 
responseTask
ßß  
=
ßß! "
client
ßß# )
.
ßß) *
GetAsync
ßß* 2
(
ßß2 3
$str
ßß3 P
)
ßßP Q
;
ßßQ R
responseTask
®® 
.
®® 
Wait
®® !
(
®®! "
)
®®" #
;
®®# $
var
™™ 
result
™™ 
=
™™ 
responseTask
™™ )
.
™™) *
Result
™™* 0
;
™™0 1
if
´´ 
(
´´ 
result
´´ 
.
´´ !
IsSuccessStatusCode
´´ .
)
´´. /
{
¨¨ 
var
ÆÆ 
readTask
ÆÆ  
=
ÆÆ! "
result
ÆÆ# )
.
ÆÆ) *
Content
ÆÆ* 1
.
ÆÆ1 2
ReadAsAsync
ÆÆ2 =
<
ÆÆ= >
List
ÆÆ> B
<
ÆÆB C
TicketStatus
ÆÆC O
>
ÆÆO P
>
ÆÆP Q
(
ÆÆQ R
)
ÆÆR S
;
ÆÆS T
readTask
ØØ 
.
ØØ 
Wait
ØØ !
(
ØØ! "
)
ØØ" #
;
ØØ# $
_ticketStatus
±± !
=
±±" #
readTask
±±$ ,
.
±±, -
Result
±±- 3
;
±±3 4
}
≤≤ 
}
¥¥ 
return
µµ 
_ticketStatus
µµ  
;
µµ  !
}
∂∂ 	
public
∏∏ 
ActionResult
∏∏ 
MemberHistory
∏∏ )
(
∏∏) *
string
∏∏* 0
Id
∏∏1 3
)
∏∏3 4
{
ππ 	
if
∫∫ 
(
∫∫ 
Session
∫∫ 
[
∫∫ 
$str
∫∫ 
]
∫∫  
==
∫∫! #
null
∫∫$ (
)
∫∫( )
{
ªª 
return
ºº 
RedirectToAction
ºº '
(
ºº' (
$str
ºº( /
,
ºº/ 0
$str
ºº1 7
)
ºº7 8
;
ºº8 9
}
ΩΩ 
Session
ææ 
[
ææ 
$str
ææ 
]
ææ 
=
ææ 
null
ææ "
;
ææ" #
List
øø 
<
øø 
MemberHistoryList
øø "
>
øø" #"
objMemberHistoryList
øø$ 8
=
øø9 :
new
øø; >
List
øø? C
<
øøC D
MemberHistoryList
øøD U
>
øøU V
(
øøV W
)
øøW X
;
øøX Y
using
¡¡ 
(
¡¡ 
var
¡¡ 
client
¡¡ 
=
¡¡ 
new
¡¡  #

HttpClient
¡¡$ .
(
¡¡. /
)
¡¡/ 0
)
¡¡0 1
{
¬¬ 
client
√√ 
.
√√ 
BaseAddress
√√ "
=
√√# $
new
√√% (
Uri
√√) ,
(
√√, -
_baseAddressOrder
√√- >
)
√√> ?
;
√√? @
var
∆∆ 
responseTask
∆∆  
=
∆∆! "
client
∆∆# )
.
∆∆) *
GetAsync
∆∆* 2
(
∆∆2 3
$str
∆∆3 O
+
∆∆P Q
Id
∆∆R T
)
∆∆T U
;
∆∆U V
responseTask
«« 
.
«« 
Wait
«« !
(
««! "
)
««" #
;
««# $
var
…… 
result
…… 
=
…… 
responseTask
…… )
.
……) *
Result
……* 0
;
……0 1
if
   
(
   
result
   
.
   !
IsSuccessStatusCode
   .
)
  . /
{
ÀÀ 
var
ÃÃ 
readTask
ÃÃ  
=
ÃÃ! "
result
ÃÃ# )
.
ÃÃ) *
Content
ÃÃ* 1
.
ÃÃ1 2
ReadAsAsync
ÃÃ2 =
<
ÃÃ= >
List
ÃÃ> B
<
ÃÃB C
MemberHistoryList
ÃÃC T
>
ÃÃT U
>
ÃÃU V
(
ÃÃV W
)
ÃÃW X
;
ÃÃX Y"
objMemberHistoryList
ŒŒ (
=
ŒŒ) *
readTask
ŒŒ+ 3
.
ŒŒ3 4
Result
ŒŒ4 :
;
ŒŒ: ;
}
–– 
}
—— 
ViewBag
”” 
.
”” 
UserId
”” 
=
”” 
Id
”” 
;
””  
return
’’ 
View
’’ 
(
’’ "
objMemberHistoryList
’’ ,
)
’’, -
;
’’- .
}
÷÷ 	
[
◊◊ 	
HttpPost
◊◊	 
]
◊◊ 
public
ÿÿ 

JsonResult
ÿÿ 
DeleteMember
ÿÿ &
(
ÿÿ& '
string
ÿÿ' -

updateData
ÿÿ. 8
)
ÿÿ8 9
{
ŸŸ 	
MemberUpdateDto
⁄⁄ !
updateObjectMessage
⁄⁄ /
=
⁄⁄0 1
null
⁄⁄2 6
;
⁄⁄6 7
var
‹‹ 
data
‹‹ 
=
‹‹ 
JsonConvert
‹‹ "
.
‹‹" #
DeserializeObject
‹‹# 4
<
‹‹4 5%
DataConversionForUpdate
‹‹5 L
>
‹‹L M
(
‹‹M N

updateData
‹‹N X
)
‹‹X Y
;
‹‹Y Z
try
›› 
{
ﬁﬁ 
using
ﬂﬂ 
(
ﬂﬂ 
var
ﬂﬂ 
client
ﬂﬂ !
=
ﬂﬂ" #
new
ﬂﬂ$ '

HttpClient
ﬂﬂ( 2
(
ﬂﬂ2 3
)
ﬂﬂ3 4
)
ﬂﬂ4 5
{
‡‡ 
client
·· 
.
·· 
BaseAddress
·· &
=
··' (
new
··) ,
Uri
··- 0
(
··0 1
_baseAddressOrder
··1 B
)
··B C
;
··C D
var
‰‰ 
putTask
‰‰ 
=
‰‰  !
client
‰‰" (
.
‰‰( )
DeleteAsync
‰‰) 4
(
‰‰4 5
$str
‰‰5 =
+
‰‰> ?
data
‰‰@ D
.
‰‰D E
Id
‰‰E G
)
‰‰G H
;
‰‰H I
putTask
ÂÂ 
.
ÂÂ 
Wait
ÂÂ  
(
ÂÂ  !
)
ÂÂ! "
;
ÂÂ" #
var
ÁÁ 
result
ÁÁ 
=
ÁÁ  
putTask
ÁÁ! (
.
ÁÁ( )
Result
ÁÁ) /
;
ÁÁ/ 0
if
ËË 
(
ËË 
result
ËË 
.
ËË !
IsSuccessStatusCode
ËË 2
)
ËË2 3
{
ÈÈ 
var
ÍÍ 
readTask
ÍÍ $
=
ÍÍ% &
result
ÍÍ' -
.
ÍÍ- .
Content
ÍÍ. 5
.
ÍÍ5 6
ReadAsAsync
ÍÍ6 A
<
ÍÍA B
MemberUpdateDto
ÍÍB Q
>
ÍÍQ R
(
ÍÍR S
)
ÍÍS T
;
ÍÍT U!
updateObjectMessage
ÏÏ +
=
ÏÏ, -
readTask
ÏÏ. 6
.
ÏÏ6 7
Result
ÏÏ7 =
;
ÏÏ= >
}
ÓÓ 
}
ÔÔ 
}
 
catch
ÒÒ 
(
ÒÒ 
	Exception
ÒÒ 
e
ÒÒ 
)
ÒÒ 
{
ÚÚ 
}
ÙÙ 
return
ıı 
Json
ıı 
(
ıı !
updateObjectMessage
ıı +
,
ıı+ ,!
JsonRequestBehavior
ıı- @
.
ıı@ A
AllowGet
ııA I
)
ııI J
;
ııJ K
}
ˆˆ 	
[
¯¯ 	
HttpPost
¯¯	 
]
¯¯ 
public
˘˘ 

JsonResult
˘˘ 
UpdateMember
˘˘ &
(
˘˘& '
string
˘˘' -

updateData
˘˘. 8
)
˘˘8 9
{
˙˙ 	
MemberUpdateDto
˚˚  
objMemberUpdateDto
˚˚ .
=
˚˚/ 0
null
˚˚1 5
;
˚˚5 6%
DataConversionForUpdate
˝˝ #
data
˝˝$ (
=
˝˝) *
JsonConvert
˝˝+ 6
.
˝˝6 7
DeserializeObject
˝˝7 H
<
˝˝H I%
DataConversionForUpdate
˝˝I `
>
˝˝` a
(
˝˝a b

updateData
˝˝b l
)
˝˝l m
;
˝˝m n
using
ÄÄ 
(
ÄÄ 
var
ÄÄ 
client
ÄÄ 
=
ÄÄ 
new
ÄÄ  #

HttpClient
ÄÄ$ .
(
ÄÄ. /
)
ÄÄ/ 0
)
ÄÄ0 1
{
ÅÅ 
client
ÇÇ 
.
ÇÇ 
BaseAddress
ÇÇ "
=
ÇÇ# $
new
ÇÇ% (
Uri
ÇÇ) ,
(
ÇÇ, -
_baseAddressOrder
ÇÇ- >
)
ÇÇ> ?
;
ÇÇ? @
var
ÖÖ 
putTask
ÖÖ 
=
ÖÖ 
client
ÖÖ $
.
ÖÖ$ %
PutAsJsonAsync
ÖÖ% 3
<
ÖÖ3 4%
DataConversionForUpdate
ÖÖ4 K
>
ÖÖK L
(
ÖÖL M
$str
ÖÖM T
,
ÖÖT U
data
ÖÖV Z
)
ÖÖZ [
;
ÖÖ[ \
putTask
ÜÜ 
.
ÜÜ 
Wait
ÜÜ 
(
ÜÜ 
)
ÜÜ 
;
ÜÜ 
var
àà 
result
àà 
=
àà 
putTask
àà $
.
àà$ %
Result
àà% +
;
àà+ ,
if
ââ 
(
ââ 
result
ââ 
.
ââ !
IsSuccessStatusCode
ââ .
)
ââ. /
{
ää 
var
ãã 
readTask
ãã  
=
ãã! "
result
ãã# )
.
ãã) *
Content
ãã* 1
.
ãã1 2
ReadAsAsync
ãã2 =
<
ãã= >
MemberUpdateDto
ãã> M
>
ããM N
(
ããN O
)
ããO P
;
ããP Q 
objMemberUpdateDto
çç &
=
çç' (
readTask
çç) 1
.
çç1 2
Result
çç2 8
;
çç8 9
}
èè 
}
êê 
return
íí 
Json
íí 
(
íí  
objMemberUpdateDto
íí *
,
íí* +!
JsonRequestBehavior
íí, ?
.
íí? @
AllowGet
íí@ H
)
ííH I
;
ííI J
}
ìì 	
public
îî 
class
îî %
DataConversionForUpdate
îî ,
{
ïï 	
public
ññ 
string
ññ 
Id
ññ 
{
ññ 
get
ññ "
;
ññ" #
set
ññ$ '
;
ññ' (
}
ññ) *
public
óó 
string
óó 
	FirstName
óó #
{
óó$ %
get
óó& )
;
óó) *
set
óó+ .
;
óó. /
}
óó0 1
public
òò 
string
òò 
LastName
òò "
{
òò# $
get
òò% (
;
òò( )
set
òò* -
;
òò- .
}
òò/ 0
public
ôô 
string
ôô 
Email
ôô 
{
ôô  !
get
ôô" %
;
ôô% &
set
ôô' *
;
ôô* +
}
ôô, -
public
öö 
string
öö 
PhoneNumber
öö %
{
öö& '
get
öö( +
;
öö+ ,
set
öö- 0
;
öö0 1
}
öö2 3
}
õõ 	
[
ùù 	
HttpPost
ùù	 
]
ùù 
public
ûû 

JsonResult
ûû 
AlterMemberStatus
ûû +
(
ûû+ ,
string
ûû, 2
	orderdata
ûû3 <
,
ûû< =
string
ûû> D
statusId
ûûE M
)
ûûM N
{
üü 	
MemberUpdateDto
†† 
objMemberUpdate
†† +
=
††, -
null
††. 2
;
††2 3
using
¢¢ 
(
¢¢ 
var
¢¢ 
client
¢¢ 
=
¢¢ 
new
¢¢  #

HttpClient
¢¢$ .
(
¢¢. /
)
¢¢/ 0
)
¢¢0 1
{
££ 
client
§§ 
.
§§ 
BaseAddress
§§ "
=
§§# $
new
§§% (
Uri
§§) ,
(
§§, -
_baseAddressOrder
§§- >
)
§§> ?
;
§§? @
var
ßß 
putTask
ßß 
=
ßß 
client
ßß $
.
ßß$ %
PutAsJsonAsync
ßß% 3
<
ßß3 4
string
ßß4 :
>
ßß: ;
(
ßß; <
$str
ßß< e
+
ßßf g
statusId
ßßh p
+
ßßq r
$str
ßßs ~
+ßß Ä
	orderdataßßÅ ä
,ßßä ã
$strßßå é
)ßßé è
;ßßè ê
putTask
®® 
.
®® 
Wait
®® 
(
®® 
)
®® 
;
®® 
var
™™ 
result
™™ 
=
™™ 
putTask
™™ $
.
™™$ %
Result
™™% +
;
™™+ ,
if
´´ 
(
´´ 
result
´´ 
.
´´ !
IsSuccessStatusCode
´´ .
)
´´. /
{
¨¨ 
var
≠≠ 
readTask
≠≠  
=
≠≠! "
result
≠≠# )
.
≠≠) *
Content
≠≠* 1
.
≠≠1 2
ReadAsAsync
≠≠2 =
<
≠≠= >
MemberUpdateDto
≠≠> M
>
≠≠M N
(
≠≠N O
)
≠≠O P
;
≠≠P Q
objMemberUpdate
ØØ #
=
ØØ$ %
readTask
ØØ& .
.
ØØ. /
Result
ØØ/ 5
;
ØØ5 6
}
±± 
}
≤≤ 
return
≥≥ 
Json
≥≥ 
(
≥≥ 
objMemberUpdate
≥≥ '
,
≥≥' (!
JsonRequestBehavior
≥≥) <
.
≥≥< =
AllowGet
≥≥= E
)
≥≥E F
;
≥≥F G
}
¥¥ 	
}
∂∂ 
}∑∑ á™
oD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Controllers\OrdersController.cs
	namespace 	
BusTicketWebApp
 
. 
Controllers %
{ 
public 

class 
OrdersController !
:" #

Controller$ .
{ 
private 
readonly 
string 
_baseAddressOrder  1
=2 3
$str4 j
;j k
public 
ActionResult 
Index !
(! "
)" #
{ 	
if 
( 
Session 
[ 
$str 
]  
==! #
null$ (
)( )
{   
return!! 
RedirectToAction!! '
(!!' (
$str!!( /
,!!/ 0
$str!!1 7
)!!7 8
;!!8 9
}"" 
Session## 
[## 
$str## 
]## 
=## 
null## "
;##" #
return$$ 
View$$ 
($$ 
)$$ 
;$$ 
}%% 	
public'' 
ActionResult'' 
Search'' "
(''" #
)''# $
{(( 	
if)) 
()) 
Session)) 
[)) 
$str)) 
]))  
==))! #
null))$ (
)))( )
{** 
return++ 
RedirectToAction++ '
(++' (
$str++( /
,++/ 0
$str++1 7
)++7 8
;++8 9
},, 
Session-- 
[-- 
$str-- 
]-- 
=-- 
null-- "
;--" #
SearchViewModel.. 
searchViewModel.. +
=.., -
new... 1
SearchViewModel..2 A
{// 
TicketStatus00 
=00 
GetTicketStatus00 .
(00. /
)00/ 0
,000 1
PaymentMethods11 
=11  
GetPaymentMethods11! 2
(112 3
)113 4
,114 5
TicketTypes22 
=22 
GetTicketTypes22 ,
(22, -
)22- .
,22. /
}33 
;33 
return44 
View44 
(44 
searchViewModel44 '
)44' (
;44( )
}55 	
[77 	
HttpPost77	 
]77 
public88 
ActionResult88 
SearchResult88 (
(88( )
FormCollection88) 7
fc888 :
)88: ;
{99 	
if:: 
(:: 
Session:: 
[:: 
$str:: 
]::  
==::! #
null::$ (
)::( )
{;; 
return<< 
RedirectToAction<< '
(<<' (
$str<<( /
,<</ 0
$str<<1 7
)<<7 8
;<<8 9
}== 
Session>> 
[>> 
$str>> 
]>> 
=>> 
null>> "
;>>" #
OrderSearchDto?? 
	searchDto?? $
=??% &
new??' *
OrderSearchDto??+ 9
(??9 :
)??: ;
;??; <
Order@@ 
search@@ 
=@@ 
new@@ 
Order@@ $
(@@$ %
)@@% &
;@@& '
ListAA 
<AA 

SearchListAA 
>AA 
searchListsAA (
=AA) *
newAA+ .
ListAA/ 3
<AA3 4

SearchListAA4 >
>AA> ?
(AA? @
)AA@ A
;AAA B
ifNN 
(NN 
fcNN 
[NN 
$strNN 
]NN 
!=NN 
nullNN "
)NN" #
{OO 
	searchDtoPP 
.PP 
TypePP 
=PP  
fcPP! #
[PP# $
$strPP$ *
]PP* +
;PP+ ,
}QQ 
ifZZ 
(ZZ 
!ZZ 
StringZZ 
.ZZ 
IsNullOrEmptyZZ %
(ZZ% &
fcZZ& (
[ZZ( )
$strZZ) 1
]ZZ1 2
)ZZ2 3
)ZZ3 4
{[[ 
	searchDto\\ 
.\\ 
Status\\  
=\\! "
fc\\# %
[\\% &
$str\\& .
]\\. /
;\\/ 0
}]] 
if^^ 
(^^ 
!^^ 
String^^ 
.^^ 
IsNullOrEmpty^^ %
(^^% &
fc^^& (
[^^( )
$str^^) 5
]^^5 6
)^^6 7
)^^7 8
{__ 
	searchDto`` 
.`` 
OrderFromDate`` '
=``( )
fc``* ,
[``, -
$str``- 9
]``9 :
;``: ;
}aa 
ifbb 
(bb 
!bb 
Stringbb 
.bb 
IsNullOrEmptybb %
(bb% &
fcbb& (
[bb( )
$strbb) 3
]bb3 4
)bb4 5
)bb5 6
{cc 
	searchDtodd 
.dd 
OrderToDatedd %
=dd& '
fcdd( *
[dd* +
$strdd+ 5
]dd5 6
;dd6 7
}ee 
ifff 
(ff 
!ff 
Stringff 
.ff 
IsNullOrEmptyff %
(ff% &
fcff& (
[ff( )
$strff) 3
]ff3 4
)ff4 5
)ff5 6
{gg 
	searchDtohh 
.hh 
OrderNohh !
=hh" #
fchh$ &
[hh& '
$strhh' 1
]hh1 2
;hh2 3
}ii 
ifjj 
(jj 
!jj 
Stringjj 
.jj 
IsNullOrEmptyjj %
(jj% &
fcjj& (
[jj( )
$strjj) 7
]jj7 8
)jj8 9
)jj9 :
{kk 
	searchDtoll 
.ll 

GmoOrderNoll $
=ll% &
fcll' )
[ll) *
$strll* 8
]ll8 9
;ll9 :
}mm 
ifoo 
(oo 
!oo 
Stringoo 
.oo 
IsNullOrEmptyoo %
(oo% &
fcoo& (
[oo( )
$stroo) 9
]oo9 :
)oo: ;
)oo; <
{pp 
	searchDtoqq 
.qq 
PaymentMethodTypeqq +
=qq, -
fcqq. 0
[qq0 1
$strqq1 A
]qqA B
;qqB C
}rr 
ifss 
(ss 
!ss 
Stringss 
.ss 
IsNullOrEmptyss %
(ss% &
fcss& (
[ss( )
$strss) 4
]ss4 5
)ss5 6
)ss6 7
{tt 
	searchDtouu 
.uu 
MemberIduu "
=uu# $
fcuu% '
[uu' (
$struu( 3
]uu3 4
;uu4 5
}vv 
ifww 
(ww 
!ww 
Stringww 
.ww 
IsNullOrEmptyww %
(ww% &
fcww& (
[ww( )
$strww) 4
]ww4 5
)ww5 6
)ww6 7
{xx 
	searchDtoyy 
.yy 
LastNameyy "
=yy# $
fcyy% '
[yy' (
$stryy( 3
]yy3 4
;yy4 5
}zz 
if{{ 
({{ 
!{{ 
String{{ 
.{{ 
IsNullOrEmpty{{ %
({{% &
fc{{& (
[{{( )
$str{{) 5
]{{5 6
){{6 7
){{7 8
{|| 
	searchDto}} 
.}} 
	FirstName}} #
=}}$ %
fc}}& (
[}}( )
$str}}) 5
]}}5 6
;}}6 7
}~~ 
if 
( 
! 
String 
. 
IsNullOrEmpty %
(% &
fc& (
[( )
$str) 4
]4 5
)5 6
)6 7
{
ÄÄ 
	searchDto
ÅÅ 
.
ÅÅ 
	Telephone
ÅÅ #
=
ÅÅ$ %
fc
ÅÅ& (
[
ÅÅ( )
$str
ÅÅ) 4
]
ÅÅ4 5
;
ÅÅ5 6
}
ÇÇ 
if
ÉÉ 
(
ÉÉ 
!
ÉÉ 
String
ÉÉ 
.
ÉÉ 
IsNullOrEmpty
ÉÉ %
(
ÉÉ% &
fc
ÉÉ& (
[
ÉÉ( )
$str
ÉÉ) 0
]
ÉÉ0 1
)
ÉÉ1 2
)
ÉÉ2 3
{
ÑÑ 
	searchDto
ÖÖ 
.
ÖÖ 
Email
ÖÖ 
=
ÖÖ  !
fc
ÖÖ" $
[
ÖÖ$ %
$str
ÖÖ% ,
]
ÖÖ, -
;
ÖÖ- .
}
ÜÜ 
if
áá 
(
áá 
!
áá 
String
áá 
.
áá 
IsNullOrEmpty
áá %
(
áá% &
fc
áá& (
[
áá( )
$str
áá) 3
]
áá3 4
)
áá4 5
)
áá5 6
{
àà 
	searchDto
ââ 
.
ââ 
RoutesId
ââ "
=
ââ# $
fc
ââ% '
[
ââ' (
$str
ââ( 2
]
ââ2 3
;
ââ3 4
}
ää 
if
ãã 
(
ãã 
!
ãã 
String
ãã 
.
ãã 
IsNullOrEmpty
ãã %
(
ãã% &
fc
ãã& (
[
ãã( )
$str
ãã) 7
]
ãã7 8
)
ãã8 9
)
ãã9 :
{
åå 
	searchDto
çç 
.
çç 
FlightId
çç "
=
çç# $
fc
çç% '
[
çç' (
$str
çç( 6
]
çç6 7
;
çç7 8
}
éé 
if
èè 
(
èè 
!
èè 
String
èè 
.
èè 
IsNullOrEmpty
èè %
(
èè% &
fc
èè& (
[
èè( )
$str
èè) 5
]
èè5 6
)
èè6 7
)
èè7 8
{
êê 
	searchDto
ëë 
.
ëë 
DateOfUseFrom
ëë '
=
ëë( )
fc
ëë* ,
[
ëë, -
$str
ëë- 9
]
ëë9 :
;
ëë: ;
}
íí 
if
ìì 
(
ìì 
!
ìì 
String
ìì 
.
ìì 
IsNullOrEmpty
ìì %
(
ìì% &
fc
ìì& (
[
ìì( )
$str
ìì) 3
]
ìì3 4
)
ìì4 5
)
ìì5 6
{
îî 
	searchDto
ïï 
.
ïï 
DateOfUseTo
ïï %
=
ïï& '
fc
ïï( *
[
ïï* +
$str
ïï+ 5
]
ïï5 6
;
ïï6 7
}
ññ 
if
óó 
(
óó 
!
óó 
String
óó 
.
óó 
IsNullOrEmpty
óó %
(
óó% &
fc
óó& (
[
óó( )
$str
óó) 9
]
óó9 :
)
óó: ;
)
óó; <
{
òò 
	searchDto
ôô 
.
ôô 
DateOfuse_From_To
ôô +
=
ôô, -
fc
ôô. 0
[
ôô0 1
$str
ôô1 A
]
ôôA B
;
ôôB C
}
öö 
if
õõ 
(
õõ 
!
õõ 
String
õõ 
.
õõ 
IsNullOrEmpty
õõ %
(
õõ% &
fc
õõ& (
[
õõ( )
$str
õõ) 9
]
õõ9 :
)
õõ: ;
)
õõ; <
{
úú 
	searchDto
ùù 
.
ùù 
OrderDateFromTo
ùù )
=
ùù* +
fc
ùù, .
[
ùù. /
$str
ùù/ ?
]
ùù? @
;
ùù@ A
}
ûû 
if
üü 
(
üü 
!
üü 
String
üü 
.
üü 
IsNullOrEmpty
üü %
(
üü% &
fc
üü& (
[
üü( )
$str
üü) 9
]
üü9 :
)
üü: ;
)
üü; <
{
†† 
	searchDto
°° 
.
°° 
IsViewDownload
°° (
=
°°) *
fc
°°+ -
[
°°- .
$str
°°. >
]
°°> ?
;
°°? @
}
¢¢ 
if
££ 
(
££ 
!
££ 
String
££ 
.
££ 
IsNullOrEmpty
££ %
(
££% &
fc
££& (
[
££( )
$str
££) 7
]
££7 8
)
££8 9
)
££9 :
{
§§ 
	searchDto
•• 
.
•• 
OrderIds
•• "
=
••# $
fc
••% '
[
••' (
$str
••( 6
]
••6 7
;
••7 8
}
¶¶ 
using
®® 
(
®® 
var
®® 
client
®® 
=
®® 
new
®®  #

HttpClient
®®$ .
(
®®. /
)
®®/ 0
)
®®0 1
{
©© 
client
™™ 
.
™™ 
BaseAddress
™™ "
=
™™# $
new
™™% (
Uri
™™) ,
(
™™, -
_baseAddressOrder
™™- >
)
™™> ?
;
™™? @
var
≠≠ 
postTask
≠≠ 
=
≠≠ 
client
≠≠ %
.
≠≠% &
PostAsJsonAsync
≠≠& 5
<
≠≠5 6
OrderSearchDto
≠≠6 D
>
≠≠D E
(
≠≠E F
$str
≠≠F N
,
≠≠N O
	searchDto
≠≠P Y
)
≠≠Y Z
;
≠≠Z [
postTask
ÆÆ 
.
ÆÆ 
Wait
ÆÆ 
(
ÆÆ 
)
ÆÆ 
;
ÆÆ  
var
∞∞ 
result
∞∞ 
=
∞∞ 
postTask
∞∞ %
.
∞∞% &
Result
∞∞& ,
;
∞∞, -
if
±± 
(
±± 
result
±± 
.
±± !
IsSuccessStatusCode
±± .
)
±±. /
{
≤≤ 
var
≥≥ 
readTask
≥≥  
=
≥≥! "
result
≥≥# )
.
≥≥) *
Content
≥≥* 1
.
≥≥1 2
ReadAsAsync
≥≥2 =
<
≥≥= >
List
≥≥> B
<
≥≥B C

SearchList
≥≥C M
>
≥≥M N
>
≥≥N O
(
≥≥O P
)
≥≥P Q
;
≥≥Q R
searchLists
µµ 
=
µµ  !
readTask
µµ" *
.
µµ* +
Result
µµ+ 1
;
µµ1 2
}
∑∑ 
}
∏∏ 
ViewBag
ææ 
.
ææ 
OrderFromDate
ææ !
=
ææ" #
	searchDto
ææ$ -
.
ææ- .
OrderFromDate
ææ. ;
;
ææ; <
ViewBag
øø 
.
øø 
OrderToDate
øø 
=
øø  !
	searchDto
øø" +
.
øø+ ,
OrderToDate
øø, 7
;
øø7 8
ViewBag
¿¿ 
.
¿¿ 
OrderDateFromTo
¿¿ #
=
¿¿$ %
	searchDto
¿¿& /
.
¿¿/ 0
OrderDateFromTo
¿¿0 ?
;
¿¿? @
ViewBag
¬¬ 
.
¬¬ 
OrderNo
¬¬ 
=
¬¬ 
	searchDto
¬¬ '
.
¬¬' (
OrderNo
¬¬( /
;
¬¬/ 0
ViewBag
√√ 
.
√√ 
Type
√√ 
=
√√ 
	searchDto
√√ $
.
√√$ %
Type
√√% )
;
√√) *
ViewBag
ƒƒ 
.
ƒƒ 

GmoOrderNo
ƒƒ 
=
ƒƒ  
	searchDto
ƒƒ! *
.
ƒƒ* +

GmoOrderNo
ƒƒ+ 5
;
ƒƒ5 6
ViewBag
∆∆ 
.
∆∆ 
PaymentMethod
∆∆ !
=
∆∆" #
	searchDto
∆∆$ -
.
∆∆- .
PaymentMethodType
∆∆. ?
;
∆∆? @
ViewBag
»» 
.
»» 
MemberId
»» 
=
»» 
search
»» %
.
»»% &
MemberId
»»& .
;
»». /
ViewBag
…… 
.
…… 
LastName
…… 
=
…… 
	searchDto
…… (
.
……( )
LastName
……) 1
;
……1 2
ViewBag
   
.
   
	FirstName
   
=
   
	searchDto
    )
.
  ) *
	FirstName
  * 3
;
  3 4
ViewBag
ÀÀ 
.
ÀÀ 
StatusId
ÀÀ 
=
ÀÀ 
	searchDto
ÀÀ (
.
ÀÀ( )
Status
ÀÀ) /
;
ÀÀ/ 0
ViewBag
ÃÃ 
.
ÃÃ 
	Telephone
ÃÃ 
=
ÃÃ 
	searchDto
ÃÃ  )
.
ÃÃ) *
	Telephone
ÃÃ* 3
;
ÃÃ3 4
ViewBag
ÕÕ 
.
ÕÕ 
Email
ÕÕ 
=
ÕÕ 
	searchDto
ÕÕ %
.
ÕÕ% &
Email
ÕÕ& +
;
ÕÕ+ ,
ViewBag
ŒŒ 
.
ŒŒ 
	FormEmail
ŒŒ 
=
ŒŒ 
	searchDto
ŒŒ  )
.
ŒŒ) *
Email
ŒŒ* /
;
ŒŒ/ 0
ViewBag
œœ 
.
œœ 
DateOfUseFrom
œœ !
=
œœ" #
	searchDto
œœ$ -
.
œœ- .
DateOfUseFrom
œœ. ;
;
œœ; <
ViewBag
–– 
.
–– 
DateOfUseTo
–– 
=
––  !
	searchDto
––" +
.
––+ ,
DateOfUseTo
––, 7
;
––7 8
ViewBag
—— 
.
—— 
DateOfuse_From_To
—— %
=
——& '
	searchDto
——( 1
.
——1 2
DateOfuse_From_To
——2 C
;
——C D
ViewBag
““ 
.
““ 
RoutesId
““ 
=
““ 
	searchDto
““ (
.
““( )
RoutesId
““) 1
;
““1 2
ViewBag
”” 
.
”” 
FlightId
”” 
=
”” 
	searchDto
”” (
.
””( )
FlightId
””) 1
;
””1 2
ViewBag
‘‘ 
.
‘‘ 
OrderIds
‘‘ 
=
‘‘ 
	searchDto
‘‘ (
.
‘‘( )
OrderIds
‘‘) 1
;
‘‘1 2
if
◊◊ 
(
◊◊ 
!
◊◊ 
string
◊◊ 
.
◊◊ 
IsNullOrEmpty
◊◊ %
(
◊◊% &
	searchDto
◊◊& /
.
◊◊/ 0
IsViewDownload
◊◊0 >
)
◊◊> ?
)
◊◊? @
{
ÿÿ 
ViewBag
ŸŸ 
.
ŸŸ 
IsViewDownload
ŸŸ &
=
ŸŸ' (
	searchDto
ŸŸ) 2
.
ŸŸ2 3
IsViewDownload
ŸŸ3 A
;
ŸŸA B
}
⁄⁄ 
else
€€ 
{
‹‹ 
ViewBag
›› 
.
›› 
IsViewDownload
›› &
=
››' (
$str
››) -
;
››- .
}
ﬁﬁ 
ViewBag
‡‡ 
.
‡‡ 
Status
‡‡ 
=
‡‡ 
GetTicketStatus
‡‡ ,
(
‡‡, -
)
‡‡- .
;
‡‡. /
ViewBag
‚‚ 
.
‚‚ 
UserId
‚‚ 
=
‚‚ 
	searchDto
‚‚ &
.
‚‚& '
MemberId
‚‚' /
;
‚‚/ 0
if
„„ 
(
„„ 
!
„„ 
string
„„ 
.
„„ 
IsNullOrEmpty
„„ %
(
„„% &
ViewBag
„„& -
.
„„- .
UserId
„„. 4
)
„„4 5
)
„„5 6
{
‰‰ 
if
ÂÂ 
(
ÂÂ 
Convert
ÂÂ 
.
ÂÂ 
ToInt32
ÂÂ #
(
ÂÂ# $
ViewBag
ÂÂ$ +
.
ÂÂ+ ,
UserId
ÂÂ, 2
)
ÂÂ2 3
>
ÂÂ4 5
$num
ÂÂ6 7
)
ÂÂ7 8
{
ÊÊ 
foreach
ËË 
(
ËË 
var
ËË  
x
ËË! "
in
ËË# %
searchLists
ËË& 1
)
ËË1 2
{
ÈÈ 
ViewBag
ÍÍ 
.
ÍÍ  
Name
ÍÍ  $
=
ÍÍ% &
x
ÍÍ' (
.
ÍÍ( )
	Purchaser
ÍÍ) 2
;
ÍÍ2 3
ViewBag
ÎÎ 
.
ÎÎ  
Email
ÎÎ  %
=
ÎÎ& '
x
ÎÎ( )
.
ÎÎ) *
Email
ÎÎ* /
;
ÎÎ/ 0
ViewBag
ÓÓ 
.
ÓÓ  

UserStatus
ÓÓ  *
=
ÓÓ+ ,
x
ÓÓ- .
.
ÓÓ. /
MemberStatus
ÓÓ/ ;
;
ÓÓ; <
}
 
}
ÒÒ 
}
ÚÚ 
return
ˆˆ 
View
ˆˆ 
(
ˆˆ 
searchLists
ˆˆ #
)
ˆˆ# $
;
ˆˆ$ %
}
˜˜ 	
public
˙˙ 
ActionResult
˙˙ 
OrderDetails
˙˙ (
(
˙˙( )
int
˙˙) ,
id
˙˙- /
,
˙˙/ 0
int
˙˙1 4
status
˙˙5 ;
)
˙˙; <
{
˚˚ 	
if
¸¸ 
(
¸¸ 
Session
¸¸ 
[
¸¸ 
$str
¸¸ 
]
¸¸  
==
¸¸! #
null
¸¸$ (
)
¸¸( )
{
˝˝ 
return
˛˛ 
RedirectToAction
˛˛ '
(
˛˛' (
$str
˛˛( /
,
˛˛/ 0
$str
˛˛1 7
)
˛˛7 8
;
˛˛8 9
}
ˇˇ 
Order
ÅÅ 
order
ÅÅ 
=
ÅÅ 
null
ÅÅ 
;
ÅÅ 
Session
ÇÇ 
[
ÇÇ 
$str
ÇÇ 
]
ÇÇ 
=
ÇÇ 
$str
ÇÇ '
;
ÇÇ' (
using
ÉÉ 
(
ÉÉ 
var
ÉÉ 
client
ÉÉ 
=
ÉÉ 
new
ÉÉ  #

HttpClient
ÉÉ$ .
(
ÉÉ. /
)
ÉÉ/ 0
)
ÉÉ0 1
{
ÑÑ 
client
ÖÖ 
.
ÖÖ 
BaseAddress
ÖÖ "
=
ÖÖ# $
new
ÖÖ% (
Uri
ÖÖ) ,
(
ÖÖ, -
_baseAddressOrder
ÖÖ- >
)
ÖÖ> ?
;
ÖÖ? @
var
áá 
responseTask
áá  
=
áá! "
client
áá# )
.
áá) *
GetAsync
áá* 2
(
áá2 3
$str
áá3 <
+
áá= >
id
áá? A
)
ááA B
;
ááB C
responseTask
àà 
.
àà 
Wait
àà !
(
àà! "
)
àà" #
;
àà# $
var
ää 
result
ää 
=
ää 
responseTask
ää )
.
ää) *
Result
ää* 0
;
ää0 1
if
ãã 
(
ãã 
result
ãã 
.
ãã !
IsSuccessStatusCode
ãã .
)
ãã. /
{
åå 
var
éé 
readTask
éé  
=
éé! "
result
éé# )
.
éé) *
Content
éé* 1
.
éé1 2
ReadAsAsync
éé2 =
<
éé= >
Order
éé> C
>
ééC D
(
ééD E
)
ééE F
;
ééF G
readTask
èè 
.
èè 
Wait
èè !
(
èè! "
)
èè" #
;
èè# $
order
ëë 
=
ëë 
readTask
ëë $
.
ëë$ %
Result
ëë% +
;
ëë+ ,
}
íí 
}
ìì 
OrderViewModel
ññ 
orderViewModel
ññ )
=
ññ* +
new
ññ, /
OrderViewModel
ññ0 >
{
óó 
Order
òò 
=
òò 
order
òò 
,
òò 
PaymentMethods
ôô 
=
ôô  
Utility
ôô! (
.
ôô( )
GetPaymentMethods
ôô) :
(
ôô: ;
)
ôô; <
,
ôô< =
TicketTypes
öö 
=
öö 
Utility
öö %
.
öö% &
GetTicketTypes
öö& 4
(
öö4 5
)
öö5 6
,
öö6 7
Adults
õõ 
=
õõ 
Utility
õõ  
.
õõ  !
GetAdultNumbers
õõ! 0
(
õõ0 1
)
õõ1 2
,
õõ2 3
Childs
úú 
=
úú 
Utility
úú  
.
úú  !
GetChildNumbers
úú! 0
(
úú0 1
)
úú1 2
,
úú2 3
}
ùù 
;
ùù 
ViewBag
üü 
.
üü 
OrderId
üü 
=
üü 
id
üü  
;
üü  !
ViewBag
†† 
.
†† 
MemberStatus
††  
=
††! "
status
††# )
;
††) *
string
°° 
strMemberStatus
°° "
=
°°# $
$str
°°% '
;
°°' (
if
¢¢ 
(
¢¢ 
status
¢¢ 
==
¢¢ 
$num
¢¢ 
)
¢¢ 
{
££ 
strMemberStatus
§§ 
=
§§  !
$str
§§" +
;
§§+ ,
}
•• 
else
¶¶ 
{
ßß 
strMemberStatus
®® 
=
®®  !
$str
®®" +
;
®®+ ,
}
©© 
ViewBag
™™ 
.
™™ 
TxtMemberStatus
™™ #
=
™™$ %
strMemberStatus
™™& 5
;
™™5 6
bool
¨¨ &
isUpdateCancelBtnDisable
¨¨ )
=
¨¨* +
false
¨¨, 1
;
¨¨1 2
if
≠≠ 
(
≠≠ 
Convert
≠≠ 
.
≠≠ 
ToInt32
≠≠ 
(
≠≠  
order
≠≠  %
.
≠≠% &
Status
≠≠& ,
)
≠≠, -
!=
≠≠. 0
$num
≠≠1 2
||
≠≠3 5
Convert
≠≠6 =
.
≠≠= >
ToInt32
≠≠> E
(
≠≠E F
ViewBag
≠≠F M
.
≠≠M N
MemberStatus
≠≠N Z
)
≠≠Z [
==
≠≠\ ^
$num
≠≠_ `
||
≠≠a c
Convert
≠≠d k
.
≠≠k l
ToInt32
≠≠l s
(
≠≠s t
ViewBag
≠≠t {
.
≠≠{ |
MemberStatus≠≠| à
)≠≠à â
==≠≠ä å
$num≠≠ç é
)≠≠é è
{
ÆÆ &
isUpdateCancelBtnDisable
ØØ (
=
ØØ) *
true
ØØ+ /
;
ØØ/ 0
}
∞∞ 
ViewBag
≤≤ 
.
≤≤ 
IsBtnDisabled
≤≤ !
=
≤≤" #&
isUpdateCancelBtnDisable
≤≤$ <
;
≤≤< =
return
¥¥ 
View
¥¥ 
(
¥¥ 
orderViewModel
¥¥ &
)
¥¥& '
;
¥¥' (
}
µµ 	
[
∑∑ 	
HttpPost
∑∑	 
]
∑∑ 
public
∏∏ 

JsonResult
∏∏ 
UpdateOrder
∏∏ %
(
∏∏% &
string
∏∏& ,

updateData
∏∏- 7
)
∏∏7 8
{
ππ 	 
OperationResultDto
∫∫ !
updateObjectMessage
∫∫ 2
=
∫∫3 4
null
∫∫5 9
;
∫∫9 :%
DataConversionForUpdate
ºº #
data
ºº$ (
=
ºº) *
JsonConvert
ºº+ 6
.
ºº6 7
DeserializeObject
ºº7 H
<
ººH I%
DataConversionForUpdate
ººI `
>
ºº` a
(
ººa b

updateData
ººb l
)
ººl m
;
ººm n
using
øø 
(
øø 
var
øø 
client
øø 
=
øø 
new
øø  #

HttpClient
øø$ .
(
øø. /
)
øø/ 0
)
øø0 1
{
¿¿ 
client
¡¡ 
.
¡¡ 
BaseAddress
¡¡ "
=
¡¡# $
new
¡¡% (
Uri
¡¡) ,
(
¡¡, -
_baseAddressOrder
¡¡- >
)
¡¡> ?
;
¡¡? @
var
ƒƒ 
putTask
ƒƒ 
=
ƒƒ 
client
ƒƒ $
.
ƒƒ$ %
PutAsJsonAsync
ƒƒ% 3
<
ƒƒ3 4%
DataConversionForUpdate
ƒƒ4 K
>
ƒƒK L
(
ƒƒL M
$str
ƒƒM U
,
ƒƒU V
data
ƒƒW [
)
ƒƒ[ \
;
ƒƒ\ ]
putTask
≈≈ 
.
≈≈ 
Wait
≈≈ 
(
≈≈ 
)
≈≈ 
;
≈≈ 
var
«« 
result
«« 
=
«« 
putTask
«« $
.
««$ %
Result
««% +
;
««+ ,
if
»» 
(
»» 
result
»» 
.
»» !
IsSuccessStatusCode
»» .
)
»». /
{
…… 
var
   
readTask
    
=
  ! "
result
  # )
.
  ) *
Content
  * 1
.
  1 2
ReadAsAsync
  2 =
<
  = > 
OperationResultDto
  > P
>
  P Q
(
  Q R
)
  R S
;
  S T!
updateObjectMessage
ÃÃ '
=
ÃÃ( )
readTask
ÃÃ* 2
.
ÃÃ2 3
Result
ÃÃ3 9
;
ÃÃ9 :
}
ŒŒ 
}
œœ 
return
—— 
Json
—— 
(
—— !
updateObjectMessage
—— +
,
——+ ,!
JsonRequestBehavior
——- @
.
——@ A
AllowGet
——A I
)
——I J
;
——J K
}
““ 	
[
‘‘ 	
HttpPost
‘‘	 
]
‘‘ 
public
’’ 

JsonResult
’’ 
DeleteOrder
’’ %
(
’’% &
string
’’& ,

updateData
’’- 7
)
’’7 8
{
÷÷ 	 
OperationResultDto
◊◊ !
updateObjectMessage
◊◊ 2
=
◊◊3 4
null
◊◊5 9
;
◊◊9 :
var
ŸŸ 
data
ŸŸ 
=
ŸŸ 
JsonConvert
ŸŸ "
.
ŸŸ" #
DeserializeObject
ŸŸ# 4
<
ŸŸ4 5%
DataConversionForUpdate
ŸŸ5 L
>
ŸŸL M
(
ŸŸM N

updateData
ŸŸN X
)
ŸŸX Y
;
ŸŸY Z
using
⁄⁄ 
(
⁄⁄ 
var
⁄⁄ 
client
⁄⁄ 
=
⁄⁄ 
new
⁄⁄  #

HttpClient
⁄⁄$ .
(
⁄⁄. /
)
⁄⁄/ 0
)
⁄⁄0 1
{
€€ 
client
‹‹ 
.
‹‹ 
BaseAddress
‹‹ "
=
‹‹# $
new
‹‹% (
Uri
‹‹) ,
(
‹‹, -
_baseAddressOrder
‹‹- >
)
‹‹> ?
;
‹‹? @
var
ﬂﬂ 
putTask
ﬂﬂ 
=
ﬂﬂ 
client
ﬂﬂ $
.
ﬂﬂ$ %
DeleteAsync
ﬂﬂ% 0
(
ﬂﬂ0 1
$str
ﬂﬂ1 :
+
ﬂﬂ; <
data
ﬂﬂ= A
.
ﬂﬂA B
OrderId
ﬂﬂB I
)
ﬂﬂI J
;
ﬂﬂJ K
putTask
‡‡ 
.
‡‡ 
Wait
‡‡ 
(
‡‡ 
)
‡‡ 
;
‡‡ 
var
‚‚ 
result
‚‚ 
=
‚‚ 
putTask
‚‚ $
.
‚‚$ %
Result
‚‚% +
;
‚‚+ ,
if
„„ 
(
„„ 
result
„„ 
.
„„ !
IsSuccessStatusCode
„„ .
)
„„. /
{
‰‰ 
var
ÂÂ 
readTask
ÂÂ  
=
ÂÂ! "
result
ÂÂ# )
.
ÂÂ) *
Content
ÂÂ* 1
.
ÂÂ1 2
ReadAsAsync
ÂÂ2 =
<
ÂÂ= > 
OperationResultDto
ÂÂ> P
>
ÂÂP Q
(
ÂÂQ R
)
ÂÂR S
;
ÂÂS T!
updateObjectMessage
ÁÁ '
=
ÁÁ( )
readTask
ÁÁ* 2
.
ÁÁ2 3
Result
ÁÁ3 9
;
ÁÁ9 :
}
ÈÈ 
}
ÍÍ 
return
ÎÎ 
Json
ÎÎ 
(
ÎÎ !
updateObjectMessage
ÎÎ +
,
ÎÎ+ ,!
JsonRequestBehavior
ÎÎ- @
.
ÎÎ@ A
AllowGet
ÎÎA I
)
ÎÎI J
;
ÎÎJ K
}
ÏÏ 	
[
ÓÓ 	
HttpPost
ÓÓ	 
]
ÓÓ 
public
ÔÔ 

JsonResult
ÔÔ 
AlterOrderStatus
ÔÔ *
(
ÔÔ* +
string
ÔÔ+ 1
	orderdata
ÔÔ2 ;
,
ÔÔ; <
string
ÔÔ= C
statusId
ÔÔD L
)
ÔÔL M
{
 	 
OperationResultDto
ÒÒ !
updateObjectMessage
ÒÒ 2
=
ÒÒ3 4
null
ÒÒ5 9
;
ÒÒ9 :
using
ÙÙ 
(
ÙÙ 
var
ÙÙ 
client
ÙÙ 
=
ÙÙ 
new
ÙÙ  #

HttpClient
ÙÙ$ .
(
ÙÙ. /
)
ÙÙ/ 0
)
ÙÙ0 1
{
ıı 
client
ˆˆ 
.
ˆˆ 
BaseAddress
ˆˆ "
=
ˆˆ# $
new
ˆˆ% (
Uri
ˆˆ) ,
(
ˆˆ, -
_baseAddressOrder
ˆˆ- >
)
ˆˆ> ?
;
ˆˆ? @
var
˘˘ 
putTask
˘˘ 
=
˘˘ 
client
˘˘ $
.
˘˘$ %
PutAsJsonAsync
˘˘% 3
<
˘˘3 4
string
˘˘4 :
>
˘˘: ;
(
˘˘; <
$str
˘˘< f
+
˘˘g h
statusId
˘˘i q
+
˘˘r s
$str˘˘t Ä
+˘˘Å Ç
	orderdata˘˘É å
,˘˘å ç
$str˘˘é ê
)˘˘ê ë
;˘˘ë í
putTask
˙˙ 
.
˙˙ 
Wait
˙˙ 
(
˙˙ 
)
˙˙ 
;
˙˙ 
var
¸¸ 
result
¸¸ 
=
¸¸ 
putTask
¸¸ $
.
¸¸$ %
Result
¸¸% +
;
¸¸+ ,
if
˝˝ 
(
˝˝ 
result
˝˝ 
.
˝˝ !
IsSuccessStatusCode
˝˝ .
)
˝˝. /
{
˛˛ 
var
ˇˇ 
readTask
ˇˇ  
=
ˇˇ! "
result
ˇˇ# )
.
ˇˇ) *
Content
ˇˇ* 1
.
ˇˇ1 2
ReadAsAsync
ˇˇ2 =
<
ˇˇ= > 
OperationResultDto
ˇˇ> P
>
ˇˇP Q
(
ˇˇQ R
)
ˇˇR S
;
ˇˇS T!
updateObjectMessage
ÅÅ '
=
ÅÅ( )
readTask
ÅÅ* 2
.
ÅÅ2 3
Result
ÅÅ3 9
;
ÅÅ9 :
}
ÉÉ 
}
ÑÑ 
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ !
updateObjectMessage
ÖÖ +
,
ÖÖ+ ,!
JsonRequestBehavior
ÖÖ- @
.
ÖÖ@ A
AllowGet
ÖÖA I
)
ÖÖI J
;
ÖÖJ K
}
ÜÜ 	
public
ää 
List
ää 
<
ää 
PaymentMethod
ää !
>
ää! "
GetPaymentMethods
ää# 4
(
ää4 5
)
ää5 6
{
ãã 	
List
åå 
<
åå 
PaymentMethod
åå 
>
åå 
_paymentMethods
åå  /
=
åå0 1
new
åå2 5
List
åå6 :
<
åå: ;
PaymentMethod
åå; H
>
ååH I
(
ååI J
)
ååJ K
;
ååK L
using
çç 
(
çç 
var
çç 
client
çç 
=
çç 
new
çç  #

HttpClient
çç$ .
(
çç. /
)
çç/ 0
)
çç0 1
{
éé 
client
èè 
.
èè 
BaseAddress
èè "
=
èè# $
new
èè% (
Uri
èè) ,
(
èè, -
_baseAddressOrder
èè- >
)
èè> ?
;
èè? @
var
ëë 
responseTask
ëë  
=
ëë! "
client
ëë# )
.
ëë) *
GetAsync
ëë* 2
(
ëë2 3
$str
ëë3 R
)
ëëR S
;
ëëS T
responseTask
íí 
.
íí 
Wait
íí !
(
íí! "
)
íí" #
;
íí# $
var
îî 
result
îî 
=
îî 
responseTask
îî )
.
îî) *
Result
îî* 0
;
îî0 1
if
ïï 
(
ïï 
result
ïï 
.
ïï !
IsSuccessStatusCode
ïï .
)
ïï. /
{
ññ 
var
òò 
readTask
òò  
=
òò! "
result
òò# )
.
òò) *
Content
òò* 1
.
òò1 2
ReadAsAsync
òò2 =
<
òò= >
List
òò> B
<
òòB C
PaymentMethod
òòC P
>
òòP Q
>
òòQ R
(
òòR S
)
òòS T
;
òòT U
readTask
ôô 
.
ôô 
Wait
ôô !
(
ôô! "
)
ôô" #
;
ôô# $
_paymentMethods
õõ #
=
õõ$ %
readTask
õõ& .
.
õõ. /
Result
õõ/ 5
;
õõ5 6
}
úú 
}
ûû 
return
üü 
_paymentMethods
üü "
;
üü" #
}
†† 	
public
¢¢ 
List
¢¢ 
<
¢¢ 
TicketStatus
¢¢  
>
¢¢  !
GetTicketStatus
¢¢" 1
(
¢¢1 2
)
¢¢2 3
{
££ 	
List
§§ 
<
§§ 
TicketStatus
§§ 
>
§§ 
_ticketStatus
§§ ,
=
§§- .
new
§§/ 2
List
§§3 7
<
§§7 8
TicketStatus
§§8 D
>
§§D E
(
§§E F
)
§§F G
;
§§G H
using
•• 
(
•• 
var
•• 
client
•• 
=
•• 
new
••  #

HttpClient
••$ .
(
••. /
)
••/ 0
)
••0 1
{
¶¶ 
client
ßß 
.
ßß 
BaseAddress
ßß "
=
ßß# $
new
ßß% (
Uri
ßß) ,
(
ßß, -
_baseAddressOrder
ßß- >
)
ßß> ?
;
ßß? @
var
©© 
responseTask
©©  
=
©©! "
client
©©# )
.
©©) *
GetAsync
©©* 2
(
©©2 3
$str
©©3 P
)
©©P Q
;
©©Q R
responseTask
™™ 
.
™™ 
Wait
™™ !
(
™™! "
)
™™" #
;
™™# $
var
¨¨ 
result
¨¨ 
=
¨¨ 
responseTask
¨¨ )
.
¨¨) *
Result
¨¨* 0
;
¨¨0 1
if
≠≠ 
(
≠≠ 
result
≠≠ 
.
≠≠ !
IsSuccessStatusCode
≠≠ .
)
≠≠. /
{
ÆÆ 
var
∞∞ 
readTask
∞∞  
=
∞∞! "
result
∞∞# )
.
∞∞) *
Content
∞∞* 1
.
∞∞1 2
ReadAsAsync
∞∞2 =
<
∞∞= >
List
∞∞> B
<
∞∞B C
TicketStatus
∞∞C O
>
∞∞O P
>
∞∞P Q
(
∞∞Q R
)
∞∞R S
;
∞∞S T
readTask
±± 
.
±± 
Wait
±± !
(
±±! "
)
±±" #
;
±±# $
_ticketStatus
≥≥ !
=
≥≥" #
readTask
≥≥$ ,
.
≥≥, -
Result
≥≥- 3
;
≥≥3 4
}
¥¥ 
}
∂∂ 
return
∑∑ 
_ticketStatus
∑∑  
;
∑∑  !
}
∏∏ 	
public
∫∫ 
List
∫∫ 
<
∫∫ 

TicketType
∫∫ 
>
∫∫ 
GetTicketTypes
∫∫  .
(
∫∫. /
)
∫∫/ 0
{
ªª 	
List
ºº 
<
ºº 

TicketType
ºº 
>
ºº 
_ticketTypes
ºº )
=
ºº* +
new
ºº, /
List
ºº0 4
<
ºº4 5

TicketType
ºº5 ?
>
ºº? @
(
ºº@ A
)
ººA B
;
ººB C
using
ΩΩ 
(
ΩΩ 
var
ΩΩ 
client
ΩΩ 
=
ΩΩ 
new
ΩΩ  #

HttpClient
ΩΩ$ .
(
ΩΩ. /
)
ΩΩ/ 0
)
ΩΩ0 1
{
ææ 
client
øø 
.
øø 
BaseAddress
øø "
=
øø# $
new
øø% (
Uri
øø) ,
(
øø, -
_baseAddressOrder
øø- >
)
øø> ?
;
øø? @
var
¡¡ 
responseTask
¡¡  
=
¡¡! "
client
¡¡# )
.
¡¡) *
GetAsync
¡¡* 2
(
¡¡2 3
$str
¡¡3 O
)
¡¡O P
;
¡¡P Q
responseTask
¬¬ 
.
¬¬ 
Wait
¬¬ !
(
¬¬! "
)
¬¬" #
;
¬¬# $
var
ƒƒ 
result
ƒƒ 
=
ƒƒ 
responseTask
ƒƒ )
.
ƒƒ) *
Result
ƒƒ* 0
;
ƒƒ0 1
if
≈≈ 
(
≈≈ 
result
≈≈ 
.
≈≈ !
IsSuccessStatusCode
≈≈ .
)
≈≈. /
{
∆∆ 
var
«« 
readTask
««  
=
««! "
result
««# )
.
««) *
Content
««* 1
.
««1 2
ReadAsAsync
««2 =
<
««= >
List
««> B
<
««B C

TicketType
««C M
>
««M N
>
««N O
(
««O P
)
««P Q
;
««Q R
readTask
»» 
.
»» 
Wait
»» !
(
»»! "
)
»»" #
;
»»# $
_ticketTypes
    
=
  ! "
readTask
  # +
.
  + ,
Result
  , 2
;
  2 3
}
ÀÀ 
}
ÕÕ 
return
ŒŒ 
_ticketTypes
ŒŒ 
;
ŒŒ  
}
œœ 	
public
—— 
ActionResult
—— !
OrderUpdatedDetails
—— /
(
——/ 0
string
——0 6
Id
——7 9
)
——9 :
{
““ 	
if
”” 
(
”” 
Session
”” 
[
”” 
$str
”” 
]
””  
==
””! #
null
””$ (
)
””( )
{
‘‘ 
return
’’ 
RedirectToAction
’’ '
(
’’' (
$str
’’( /
,
’’/ 0
$str
’’1 7
)
’’7 8
;
’’8 9
}
÷÷ 
Session
◊◊ 
[
◊◊ 
$str
◊◊ 
]
◊◊ 
=
◊◊ 
null
◊◊ "
;
◊◊" #
Order
ÿÿ 
order
ÿÿ 
=
ÿÿ 
null
ÿÿ 
;
ÿÿ 
using
⁄⁄ 
(
⁄⁄ 
var
⁄⁄ 
client
⁄⁄ 
=
⁄⁄ 
new
⁄⁄  #

HttpClient
⁄⁄$ .
(
⁄⁄. /
)
⁄⁄/ 0
)
⁄⁄0 1
{
€€ 
client
‹‹ 
.
‹‹ 
BaseAddress
‹‹ "
=
‹‹# $
new
‹‹% (
Uri
‹‹) ,
(
‹‹, -
_baseAddressOrder
‹‹- >
)
‹‹> ?
;
‹‹? @
var
ﬁﬁ 
responseTask
ﬁﬁ  
=
ﬁﬁ! "
client
ﬁﬁ# )
.
ﬁﬁ) *
GetAsync
ﬁﬁ* 2
(
ﬁﬁ2 3
$str
ﬁﬁ3 <
+
ﬁﬁ= >
Id
ﬁﬁ? A
)
ﬁﬁA B
;
ﬁﬁB C
responseTask
ﬂﬂ 
.
ﬂﬂ 
Wait
ﬂﬂ !
(
ﬂﬂ! "
)
ﬂﬂ" #
;
ﬂﬂ# $
var
·· 
result
·· 
=
·· 
responseTask
·· )
.
··) *
Result
··* 0
;
··0 1
if
‚‚ 
(
‚‚ 
result
‚‚ 
.
‚‚ !
IsSuccessStatusCode
‚‚ .
)
‚‚. /
{
„„ 
var
ÂÂ 
readTask
ÂÂ  
=
ÂÂ! "
result
ÂÂ# )
.
ÂÂ) *
Content
ÂÂ* 1
.
ÂÂ1 2
ReadAsAsync
ÂÂ2 =
<
ÂÂ= >
Order
ÂÂ> C
>
ÂÂC D
(
ÂÂD E
)
ÂÂE F
;
ÂÂF G
readTask
ÊÊ 
.
ÊÊ 
Wait
ÊÊ !
(
ÊÊ! "
)
ÊÊ" #
;
ÊÊ# $
order
ËË 
=
ËË 
readTask
ËË $
.
ËË$ %
Result
ËË% +
;
ËË+ ,
}
ÈÈ 
}
ÎÎ 
OrderViewModel
ÓÓ 
orderViewModel
ÓÓ )
=
ÓÓ* +
new
ÓÓ, /
OrderViewModel
ÓÓ0 >
{
ÔÔ 
Order
 
=
 
order
 
,
 
PaymentMethods
ÒÒ 
=
ÒÒ  
Utility
ÒÒ! (
.
ÒÒ( )
GetPaymentMethods
ÒÒ) :
(
ÒÒ: ;
)
ÒÒ; <
,
ÒÒ< =
TicketTypes
ÚÚ 
=
ÚÚ 
Utility
ÚÚ %
.
ÚÚ% &
GetTicketTypes
ÚÚ& 4
(
ÚÚ4 5
)
ÚÚ5 6
,
ÚÚ6 7
Adults
ÛÛ 
=
ÛÛ 
Utility
ÛÛ  
.
ÛÛ  !
GetAdultNumbers
ÛÛ! 0
(
ÛÛ0 1
)
ÛÛ1 2
,
ÛÛ2 3
Childs
ÙÙ 
=
ÙÙ 
Utility
ÙÙ  
.
ÙÙ  !
GetChildNumbers
ÙÙ! 0
(
ÙÙ0 1
)
ÙÙ1 2
,
ÙÙ2 3
}
ıı 
;
ıı 
return
˘˘ 
View
˘˘ 
(
˘˘ 
orderViewModel
˘˘ &
)
˘˘& '
;
˘˘' (
}
˙˙ 	
[
¸¸ 	
HttpGet
¸¸	 
]
¸¸ 
public
˝˝ 
ActionResult
˝˝ 
OrderHistory
˝˝ (
(
˝˝( )
string
˝˝) /
Id
˝˝0 2
,
˝˝2 3
string
˝˝4 :
MemberStatus
˝˝; G
)
˝˝G H
{
˛˛ 	
if
ˇˇ 
(
ˇˇ 
Session
ˇˇ 
[
ˇˇ 
$str
ˇˇ 
]
ˇˇ  
==
ˇˇ! #
null
ˇˇ$ (
)
ˇˇ( )
{
ÄÄ 
return
ÅÅ 
RedirectToAction
ÅÅ '
(
ÅÅ' (
$str
ÅÅ( /
,
ÅÅ/ 0
$str
ÅÅ1 7
)
ÅÅ7 8
;
ÅÅ8 9
}
ÇÇ 
Session
ÉÉ 
[
ÉÉ 
$str
ÉÉ 
]
ÉÉ 
=
ÉÉ 
null
ÉÉ "
;
ÉÉ" #
List
ÑÑ 
<
ÑÑ 
OrderHistoryList
ÑÑ !
>
ÑÑ! "!
objOrderHistoryList
ÑÑ# 6
=
ÑÑ7 8
new
ÑÑ9 <
List
ÑÑ= A
<
ÑÑA B
OrderHistoryList
ÑÑB R
>
ÑÑR S
(
ÑÑS T
)
ÑÑT U
;
ÑÑU V
using
ÜÜ 
(
ÜÜ 
var
ÜÜ 
client
ÜÜ 
=
ÜÜ 
new
ÜÜ  #

HttpClient
ÜÜ$ .
(
ÜÜ. /
)
ÜÜ/ 0
)
ÜÜ0 1
{
áá 
client
àà 
.
àà 
BaseAddress
àà "
=
àà# $
new
àà% (
Uri
àà) ,
(
àà, -
_baseAddressOrder
àà- >
)
àà> ?
;
àà? @
var
ãã 
responseTask
ãã  
=
ãã! "
client
ãã# )
.
ãã) *
GetAsync
ãã* 2
(
ãã2 3
$str
ãã3 K
+
ããL M
Id
ããN P
)
ããP Q
;
ããQ R
responseTask
åå 
.
åå 
Wait
åå !
(
åå! "
)
åå" #
;
åå# $
var
éé 
result
éé 
=
éé 
responseTask
éé )
.
éé) *
Result
éé* 0
;
éé0 1
if
èè 
(
èè 
result
èè 
.
èè !
IsSuccessStatusCode
èè .
)
èè. /
{
êê 
var
ëë 
readTask
ëë  
=
ëë! "
result
ëë# )
.
ëë) *
Content
ëë* 1
.
ëë1 2
ReadAsAsync
ëë2 =
<
ëë= >
List
ëë> B
<
ëëB C
OrderHistoryList
ëëC S
>
ëëS T
>
ëëT U
(
ëëU V
)
ëëV W
;
ëëW X!
objOrderHistoryList
ìì '
=
ìì( )
readTask
ìì* 2
.
ìì2 3
Result
ìì3 9
;
ìì9 :
}
ïï 
}
ññ 
ViewBag
óó 
.
óó 
MemberStatus
óó  
=
óó! "
MemberStatus
óó# /
;
óó/ 0
return
ôô 
View
ôô 
(
ôô !
objOrderHistoryList
ôô +
)
ôô+ ,
;
ôô, -
}
öö 	
public
ùù 
ActionResult
ùù 
GenerateSearchPdf
ùù -
(
ùù- .
Order
ùù. 3

searchData
ùù4 >
)
ùù> ?
{
ûû 	
List
üü 
<
üü 

SearchList
üü 
>
üü 
searchLists
üü (
=
üü) *
new
üü+ .
List
üü/ 3
<
üü3 4

SearchList
üü4 >
>
üü> ?
(
üü? @
)
üü@ A
;
üüA B
OrderSearchDto
†† 
	searchDto
†† $
=
††% &
new
††' *
OrderSearchDto
††+ 9
(
††9 :
)
††: ;
;
††; <
	searchDto
°° 
.
°° 
OrderIds
°° 
=
°°  

searchData
°°! +
.
°°+ ,
OrderIds
°°, 4
;
°°4 5
if
¢¢ 
(
¢¢ 
!
¢¢ 
string
¢¢ 
.
¢¢ 
IsNullOrEmpty
¢¢ %
(
¢¢% &
	searchDto
¢¢& /
.
¢¢/ 0
OrderIds
¢¢0 8
)
¢¢8 9
)
¢¢9 :
{
££ 
	searchDto
§§ 
.
§§ 
OrderFromDate
§§ '
=
§§( )
$str
§§* ,
;
§§, -
	searchDto
•• 
.
•• 
OrderToDate
•• %
=
••& '
$str
••( *
;
••* +
	searchDto
¶¶ 
.
¶¶ 
OrderDateFromTo
¶¶ )
=
¶¶* +
$str
¶¶, .
;
¶¶. /
	searchDto
ßß 
.
ßß 
OrderNo
ßß !
=
ßß" #
$str
ßß$ &
;
ßß& '
	searchDto
®® 
.
®® 
Type
®® 
=
®®  
$str
®®! #
;
®®# $
	searchDto
©© 
.
©© 

GmoOrderNo
©© $
=
©©% &
$str
©©' )
;
©©) *
	searchDto
™™ 
.
™™ 
PaymentMethodType
™™ +
=
™™, -
$str
™™. 0
;
™™0 1
	searchDto
´´ 
.
´´ 
LastName
´´ "
=
´´# $
$str
´´% '
;
´´' (
	searchDto
¨¨ 
.
¨¨ 
	FirstName
¨¨ #
=
¨¨$ %
$str
¨¨& (
;
¨¨( )
	searchDto
≠≠ 
.
≠≠ 
	Telephone
≠≠ #
=
≠≠$ %
$str
≠≠& (
;
≠≠( )
	searchDto
ÆÆ 
.
ÆÆ 
Email
ÆÆ 
=
ÆÆ  !
$str
ÆÆ" $
;
ÆÆ$ %
	searchDto
ØØ 
.
ØØ 
Status
ØØ  
=
ØØ! "
$str
ØØ# %
;
ØØ% &
	searchDto
∞∞ 
.
∞∞ 
DateOfUseFrom
∞∞ '
=
∞∞( )
$str
∞∞* ,
;
∞∞, -
	searchDto
±± 
.
±± 
DateOfUseTo
±± %
=
±±& '
$str
±±( *
;
±±* +
	searchDto
≤≤ 
.
≤≤ 
DateOfuse_From_To
≤≤ +
=
≤≤, -
$str
≤≤. 0
;
≤≤0 1
	searchDto
≥≥ 
.
≥≥ 
MemberId
≥≥ "
=
≥≥# $
$str
≥≥% '
;
≥≥' (
}
¥¥ 
else
µµ 
{
∂∂ 
	searchDto
∑∑ 
.
∑∑ 
OrderFromDate
∑∑ '
=
∑∑( )

searchData
∑∑* 4
.
∑∑4 5
OrderFromDate
∑∑5 B
.
∑∑B C
ToString
∑∑C K
(
∑∑K L
)
∑∑L M
;
∑∑M N
	searchDto
∏∏ 
.
∏∏ 
OrderToDate
∏∏ %
=
∏∏& '

searchData
∏∏( 2
.
∏∏2 3
OrderToDate
∏∏3 >
.
∏∏> ?
ToString
∏∏? G
(
∏∏G H
)
∏∏H I
;
∏∏I J
	searchDto
ππ 
.
ππ 
OrderDateFromTo
ππ )
=
ππ* +

searchData
ππ, 6
.
ππ6 7
OrderDateFromTo
ππ7 F
;
ππF G
	searchDto
∫∫ 
.
∫∫ 
OrderNo
∫∫ !
=
∫∫" #

searchData
∫∫$ .
.
∫∫. /
OrderNo
∫∫/ 6
;
∫∫6 7
	searchDto
ªª 
.
ªª 
Type
ªª 
=
ªª  

searchData
ªª! +
.
ªª+ ,
Type
ªª, 0
;
ªª0 1
	searchDto
ºº 
.
ºº 

GmoOrderNo
ºº $
=
ºº% &

searchData
ºº' 1
.
ºº1 2

GmoOrderNo
ºº2 <
;
ºº< =
	searchDto
ΩΩ 
.
ΩΩ 
PaymentMethodType
ΩΩ +
=
ΩΩ, -

searchData
ΩΩ. 8
.
ΩΩ8 9
PaymentMethodType
ΩΩ9 J
.
ΩΩJ K
ToString
ΩΩK S
(
ΩΩS T
)
ΩΩT U
==
ΩΩV X
$str
ΩΩY \
?
ΩΩ] ^
null
ΩΩ_ c
:
ΩΩd e

searchData
ΩΩf p
.
ΩΩp q 
PaymentMethodTypeΩΩq Ç
.ΩΩÇ É
ToStringΩΩÉ ã
(ΩΩã å
)ΩΩå ç
;ΩΩç é
	searchDto
ææ 
.
ææ 
LastName
ææ "
=
ææ# $

searchData
ææ% /
.
ææ/ 0
LastName
ææ0 8
;
ææ8 9
	searchDto
øø 
.
øø 
	FirstName
øø #
=
øø$ %

searchData
øø& 0
.
øø0 1
	FirstName
øø1 :
;
øø: ;
	searchDto
¿¿ 
.
¿¿ 
	Telephone
¿¿ #
=
¿¿$ %

searchData
¿¿& 0
.
¿¿0 1
	Telephone
¿¿1 :
;
¿¿: ;
	searchDto
¡¡ 
.
¡¡ 
Email
¡¡ 
=
¡¡  !

searchData
¡¡" ,
.
¡¡, -
Email
¡¡- 2
;
¡¡2 3
	searchDto
¬¬ 
.
¬¬ 
Status
¬¬  
=
¬¬! "

searchData
¬¬# -
.
¬¬- .
Status
¬¬. 4
;
¬¬4 5
	searchDto
√√ 
.
√√ 
DateOfUseFrom
√√ '
=
√√( )

searchData
√√* 4
.
√√4 5
DateOfUseFrom
√√5 B
;
√√B C
	searchDto
ƒƒ 
.
ƒƒ 
DateOfUseTo
ƒƒ %
=
ƒƒ& '

searchData
ƒƒ( 2
.
ƒƒ2 3
DateOfUseTo
ƒƒ3 >
;
ƒƒ> ?
	searchDto
≈≈ 
.
≈≈ 
DateOfuse_From_To
≈≈ +
=
≈≈, -

searchData
≈≈. 8
.
≈≈8 9
DateOfuse_From_To
≈≈9 J
;
≈≈J K
	searchDto
∆∆ 
.
∆∆ 
MemberId
∆∆ "
=
∆∆# $

searchData
∆∆% /
.
∆∆/ 0
MemberId
∆∆0 8
;
∆∆8 9
}
«« 
using
ÀÀ 
(
ÀÀ 
var
ÀÀ 
client
ÀÀ 
=
ÀÀ 
new
ÀÀ  #

HttpClient
ÀÀ$ .
(
ÀÀ. /
)
ÀÀ/ 0
)
ÀÀ0 1
{
ÃÃ 
client
ÕÕ 
.
ÕÕ 
BaseAddress
ÕÕ "
=
ÕÕ# $
new
ÕÕ% (
Uri
ÕÕ) ,
(
ÕÕ, -
_baseAddressOrder
ÕÕ- >
)
ÕÕ> ?
;
ÕÕ? @
var
–– 
postTask
–– 
=
–– 
client
–– %
.
––% &
PostAsJsonAsync
––& 5
<
––5 6
OrderSearchDto
––6 D
>
––D E
(
––E F
$str
––F N
,
––N O
	searchDto
––P Y
)
––Y Z
;
––Z [
postTask
—— 
.
—— 
Wait
—— 
(
—— 
)
—— 
;
——  
var
”” 
result
”” 
=
”” 
postTask
”” %
.
””% &
Result
””& ,
;
””, -
if
‘‘ 
(
‘‘ 
result
‘‘ 
.
‘‘ !
IsSuccessStatusCode
‘‘ .
)
‘‘. /
{
’’ 
var
÷÷ 
readTask
÷÷  
=
÷÷! "
result
÷÷# )
.
÷÷) *
Content
÷÷* 1
.
÷÷1 2
ReadAsAsync
÷÷2 =
<
÷÷= >
List
÷÷> B
<
÷÷B C

SearchList
÷÷C M
>
÷÷M N
>
÷÷N O
(
÷÷O P
)
÷÷P Q
;
÷÷Q R
searchLists
ÿÿ 
=
ÿÿ  !
readTask
ÿÿ" *
.
ÿÿ* +
Result
ÿÿ+ 1
;
ÿÿ1 2
}
⁄⁄ 
}
€€ 
string
›› 
table
›› 
=
›› 
$str
›ô 
;
ôô 
int
úú 
count
úú 
=
úú 
$num
úú 
;
úú 
foreach
ùù 
(
ùù 
var
ùù 
item
ùù 
in
ùù  
searchLists
ùù! ,
)
ùù, -
{
ûû 
table
üü 
+=
üü 
$@"
üü 
$str
ü°  
{
°°  !
count
°°! &
}
°°& '
$str
°¢'  
{
¢¢  !
item
¢¢! %
.
¢¢% &
OrderNo
¢¢& -
}
¢¢- .
$str
¢£. !
{
££! "
Convert
££" )
.
££) *

ToDateTime
££* 4
(
££4 5
item
££5 9
.
££9 :
	OrderDate
££: C
)
££C D
}
££D E
$str
£§E !
{
§§! "
item
§§" &
.
§§& '

TicketType
§§' 1
}
§§1 2
$str
§•2  
{
••  !
item
••! %
.
••% &
	Purchaser
••& /
}
••0 1
$str
•¶1  
{
¶¶  !
item
¶¶! %
.
¶¶% &
NumberOfAdult
¶¶& 3
}
¶¶3 4
$str
¶ß4 !
{
ßß! "
item
ßß" &
.
ßß& '
NumberOfChild
ßß' 4
}
ßß4 5
$str
ß®5 !
{
®®! "
item
®®" &
.
®®& '
Status
®®' -
}
®®- .
$str
®™. 
"
™™ 
;
™™ 
count
¨¨ 
++
¨¨ 
;
¨¨ 
}
≠≠ 
table
ØØ 
+=
ØØ 
$str
Ø¥ 
;
¥¥ 
byte
ππ 
[
ππ 
]
ππ 
fileContents
ππ 
=
ππ  !
null
ππ" &
;
ππ& '
var
ºº 

outputPath
ºº 
=
ºº 
System
ºº #
.
ºº# $
IO
ºº$ &
.
ºº& '
Path
ºº' +
.
ºº+ ,
Combine
ºº, 3
(
ºº3 4
Server
ºº4 :
.
ºº: ;
MapPath
ºº; B
(
ººB C
$str
ººC G
)
ººG H
,
ººH I
$str
ººJ c
)
ººc d
;
ººd e
iText
øø 
.
øø 
Kernel
øø 
.
øø 
Pdf
øø 
.
øø 
	PdfWriter
øø &
writer
øø' -
=
øø. /
new
øø0 3
iText
øø4 9
.
øø9 :
Kernel
øø: @
.
øø@ A
Pdf
øøA D
.
øøD E
	PdfWriter
øøE N
(
øøN O

outputPath
øøO Y
)
øøY Z
;
øøZ [!
ConverterProperties
¬¬ 

properties
¬¬  *
=
¬¬+ ,
new
¬¬- 0!
ConverterProperties
¬¬1 D
(
¬¬D E
)
¬¬E F
;
¬¬F G
PdfDocument
≈≈ 
pdfDocument
≈≈ #
=
≈≈$ %
new
≈≈& )
PdfDocument
≈≈* 5
(
≈≈5 6
writer
≈≈6 <
)
≈≈< =
;
≈≈= >
pdfDocument
«« 
.
««  
SetDefaultPageSize
«« *
(
««* +
PageSize
««+ 3
.
««3 4
A4
««4 6
.
««6 7
Rotate
««7 =
(
««= >
)
««> ?
)
««? @
;
««@ A
Document
…… 
dc
…… 
=
…… 
null
…… 
;
…… 
try
ÃÃ 
{
ŒŒ 
dc
–– 
=
–– 
HtmlConverter
–– "
.
––" #
ConvertToDocument
––# 4
(
––4 5
table
––5 :
,
––: ;
pdfDocument
––< G
,
––G H

properties
––I S
)
––S T
;
––T U
dc
““ 
.
““ 
Close
““ 
(
““ 
)
““ 
;
““ 
fileContents
‘‘ 
=
‘‘ 
System
‘‘ %
.
‘‘% &
IO
‘‘& (
.
‘‘( )
File
‘‘) -
.
‘‘- .
ReadAllBytes
‘‘. :
(
‘‘: ;

outputPath
‘‘; E
)
‘‘E F
;
‘‘F G
System
÷÷ 
.
÷÷ 
IO
÷÷ 
.
÷÷ 
File
÷÷ 
.
÷÷ 
Delete
÷÷ %
(
÷÷% &

outputPath
÷÷& 0
)
÷÷0 1
;
÷÷1 2
}
⁄⁄ 
catch
‹‹ 
(
‹‹ 
	Exception
‹‹ 
ex
‹‹ 
)
‹‹  
{
ﬁﬁ 
}
‚‚ 
string
ÊÊ 
pdfFileName
ÊÊ 
=
ÊÊ  
$str
ÊÊ! 7
+
ÊÊ8 9
DateTime
ÊÊ: B
.
ÊÊB C
Today
ÊÊC H
.
ÊÊH I
Date
ÊÊI M
.
ÊÊM N
ToString
ÊÊN V
(
ÊÊV W
$str
ÊÊW d
)
ÊÊd e
+
ÊÊf g
$str
ÊÊh n
;
ÊÊn o
return
ËË 
File
ËË 
(
ËË 
fileContents
ËË $
,
ËË$ %
$str
ËË& 7
,
ËË7 8
pdfFileName
ËË9 D
)
ËËD E
;
ËËE F
}
ÈÈ 	
public
ÎÎ 
ActionResult
ÎÎ 
GenerateSearchCsv
ÎÎ -
(
ÎÎ- .
Order
ÎÎ. 3

searchData
ÎÎ4 >
)
ÎÎ> ?
{
ÏÏ 	
var
ÌÌ 
sb
ÌÌ 
=
ÌÌ 
new
ÌÌ 
StringBuilder
ÌÌ &
(
ÌÌ& '
)
ÌÌ' (
;
ÌÌ( )
List
ÓÓ 
<
ÓÓ 

SearchList
ÓÓ 
>
ÓÓ 
searchLists
ÓÓ (
=
ÓÓ) *
new
ÓÓ+ .
List
ÓÓ/ 3
<
ÓÓ3 4

SearchList
ÓÓ4 >
>
ÓÓ> ?
(
ÓÓ? @
)
ÓÓ@ A
;
ÓÓA B
OrderSearchDto
ÔÔ 
	searchDto
ÔÔ $
=
ÔÔ% &
new
ÔÔ' *
OrderSearchDto
ÔÔ+ 9
(
ÔÔ9 :
)
ÔÔ: ;
;
ÔÔ; <
	searchDto
ÒÒ 
.
ÒÒ 
OrderIds
ÒÒ 
=
ÒÒ  

searchData
ÒÒ! +
.
ÒÒ+ ,
OrderIds
ÒÒ, 4
;
ÒÒ4 5
if
ÚÚ 
(
ÚÚ 
!
ÚÚ 
string
ÚÚ 
.
ÚÚ 
IsNullOrEmpty
ÚÚ %
(
ÚÚ% &
	searchDto
ÚÚ& /
.
ÚÚ/ 0
OrderIds
ÚÚ0 8
)
ÚÚ8 9
)
ÚÚ9 :
{
ÛÛ 
	searchDto
ÙÙ 
.
ÙÙ 
OrderFromDate
ÙÙ '
=
ÙÙ( )
$str
ÙÙ* ,
;
ÙÙ, -
	searchDto
ıı 
.
ıı 
OrderToDate
ıı %
=
ıı& '
$str
ıı( *
;
ıı* +
	searchDto
ˆˆ 
.
ˆˆ 
OrderDateFromTo
ˆˆ )
=
ˆˆ* +
$str
ˆˆ, .
;
ˆˆ. /
	searchDto
˜˜ 
.
˜˜ 
OrderNo
˜˜ !
=
˜˜" #
$str
˜˜$ &
;
˜˜& '
	searchDto
¯¯ 
.
¯¯ 
Type
¯¯ 
=
¯¯  
$str
¯¯! #
;
¯¯# $
	searchDto
˘˘ 
.
˘˘ 

GmoOrderNo
˘˘ $
=
˘˘% &
$str
˘˘' )
;
˘˘) *
	searchDto
˙˙ 
.
˙˙ 
PaymentMethodType
˙˙ +
=
˙˙, -
$str
˙˙. 0
;
˙˙0 1
	searchDto
˚˚ 
.
˚˚ 
LastName
˚˚ "
=
˚˚# $
$str
˚˚% '
;
˚˚' (
	searchDto
¸¸ 
.
¸¸ 
	FirstName
¸¸ #
=
¸¸$ %
$str
¸¸& (
;
¸¸( )
	searchDto
˝˝ 
.
˝˝ 
	Telephone
˝˝ #
=
˝˝$ %
$str
˝˝& (
;
˝˝( )
	searchDto
˛˛ 
.
˛˛ 
Email
˛˛ 
=
˛˛  !
$str
˛˛" $
;
˛˛$ %
	searchDto
ˇˇ 
.
ˇˇ 
Status
ˇˇ  
=
ˇˇ! "
$str
ˇˇ# %
;
ˇˇ% &
	searchDto
ÄÄ 
.
ÄÄ 
DateOfUseFrom
ÄÄ '
=
ÄÄ( )
$str
ÄÄ* ,
;
ÄÄ, -
	searchDto
ÅÅ 
.
ÅÅ 
DateOfUseTo
ÅÅ %
=
ÅÅ& '
$str
ÅÅ( *
;
ÅÅ* +
	searchDto
ÇÇ 
.
ÇÇ 
DateOfuse_From_To
ÇÇ +
=
ÇÇ, -
$str
ÇÇ. 0
;
ÇÇ0 1
	searchDto
ÉÉ 
.
ÉÉ 
MemberId
ÉÉ "
=
ÉÉ# $
$str
ÉÉ% '
;
ÉÉ' (
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
	searchDto
áá 
.
áá 
OrderFromDate
áá '
=
áá( )

searchData
áá* 4
.
áá4 5
OrderFromDate
áá5 B
.
ááB C
ToString
ááC K
(
ááK L
)
ááL M
;
ááM N
	searchDto
àà 
.
àà 
OrderToDate
àà %
=
àà& '

searchData
àà( 2
.
àà2 3
OrderToDate
àà3 >
.
àà> ?
ToString
àà? G
(
ààG H
)
ààH I
;
ààI J
	searchDto
ââ 
.
ââ 
OrderDateFromTo
ââ )
=
ââ* +

searchData
ââ, 6
.
ââ6 7
OrderDateFromTo
ââ7 F
;
ââF G
	searchDto
ää 
.
ää 
OrderNo
ää !
=
ää" #

searchData
ää$ .
.
ää. /
OrderNo
ää/ 6
;
ää6 7
	searchDto
ãã 
.
ãã 
Type
ãã 
=
ãã  

searchData
ãã! +
.
ãã+ ,
Type
ãã, 0
;
ãã0 1
	searchDto
åå 
.
åå 

GmoOrderNo
åå $
=
åå% &

searchData
åå' 1
.
åå1 2

GmoOrderNo
åå2 <
;
åå< =
	searchDto
çç 
.
çç 
PaymentMethodType
çç +
=
çç, -

searchData
çç. 8
.
çç8 9
PaymentMethodType
çç9 J
.
ççJ K
ToString
ççK S
(
ççS T
)
ççT U
==
ççV X
$str
ççY \
?
çç] ^
null
çç_ c
:
ççd e

searchData
ççf p
.
ççp q 
PaymentMethodTypeççq Ç
.ççÇ É
ToStringççÉ ã
(ççã å
)ççå ç
;ççç é
	searchDto
éé 
.
éé 
LastName
éé "
=
éé# $

searchData
éé% /
.
éé/ 0
LastName
éé0 8
;
éé8 9
	searchDto
èè 
.
èè 
	FirstName
èè #
=
èè$ %

searchData
èè& 0
.
èè0 1
	FirstName
èè1 :
;
èè: ;
	searchDto
êê 
.
êê 
	Telephone
êê #
=
êê$ %

searchData
êê& 0
.
êê0 1
	Telephone
êê1 :
;
êê: ;
	searchDto
ëë 
.
ëë 
Email
ëë 
=
ëë  !

searchData
ëë" ,
.
ëë, -
Email
ëë- 2
;
ëë2 3
	searchDto
íí 
.
íí 
Status
íí  
=
íí! "

searchData
íí# -
.
íí- .
Status
íí. 4
;
íí4 5
	searchDto
ìì 
.
ìì 
DateOfUseFrom
ìì '
=
ìì( )

searchData
ìì* 4
.
ìì4 5
DateOfUseFrom
ìì5 B
;
ììB C
	searchDto
îî 
.
îî 
DateOfUseTo
îî %
=
îî& '

searchData
îî( 2
.
îî2 3
DateOfUseTo
îî3 >
;
îî> ?
	searchDto
ïï 
.
ïï 
DateOfuse_From_To
ïï +
=
ïï, -

searchData
ïï. 8
.
ïï8 9
DateOfuse_From_To
ïï9 J
;
ïïJ K
	searchDto
ññ 
.
ññ 
MemberId
ññ "
=
ññ# $

searchData
ññ% /
.
ññ/ 0
MemberId
ññ0 8
;
ññ8 9
}
óó 
using
ôô 
(
ôô 
var
ôô 
client
ôô 
=
ôô 
new
ôô  #

HttpClient
ôô$ .
(
ôô. /
)
ôô/ 0
)
ôô0 1
{
öö 
client
õõ 
.
õõ 
BaseAddress
õõ "
=
õõ# $
new
õõ% (
Uri
õõ) ,
(
õõ, -
_baseAddressOrder
õõ- >
)
õõ> ?
;
õõ? @
var
ûû 
postTask
ûû 
=
ûû 
client
ûû %
.
ûû% &
PostAsJsonAsync
ûû& 5
<
ûû5 6
OrderSearchDto
ûû6 D
>
ûûD E
(
ûûE F
$str
ûûF N
,
ûûN O
	searchDto
ûûP Y
)
ûûY Z
;
ûûZ [
postTask
üü 
.
üü 
Wait
üü 
(
üü 
)
üü 
;
üü  
var
°° 
result
°° 
=
°° 
postTask
°° %
.
°°% &
Result
°°& ,
;
°°, -
if
¢¢ 
(
¢¢ 
result
¢¢ 
.
¢¢ !
IsSuccessStatusCode
¢¢ .
)
¢¢. /
{
££ 
var
§§ 
readTask
§§  
=
§§! "
result
§§# )
.
§§) *
Content
§§* 1
.
§§1 2
ReadAsAsync
§§2 =
<
§§= >
List
§§> B
<
§§B C

SearchList
§§C M
>
§§M N
>
§§N O
(
§§O P
)
§§P Q
;
§§Q R
searchLists
¶¶ 
=
¶¶  !
readTask
¶¶" *
.
¶¶* +
Result
¶¶+ 1
;
¶¶1 2
}
®® 
}
©© 
int
™™ 
count
™™ 
=
™™ 
$num
™™ 
;
™™ 
sb
´´ 
.
´´ 
AppendFormat
´´ 
(
´´ 
$str
´´ A
,
´´A B
$str
´´C G
,
´´G H
$str
´´I S
,
´´S T
$str
´´U b
,
´´b c
$str
´´d q
,
´´q r
$str
´´s ~
,
´´~ 
$str´´Ä á
,´´á à
$str´´â ê
,´´ê ë
$str´´í °
,´´° ¢
Environment´´£ Æ
.´´Æ Ø
NewLine´´Ø ∂
)´´∂ ∑
;´´∑ ∏
foreach
¨¨ 
(
¨¨ 
var
¨¨ 
item
¨¨ 
in
¨¨  
searchLists
¨¨! ,
)
¨¨, -
{
≠≠ 
sb
ÆÆ 
.
ÆÆ 
AppendFormat
ÆÆ 
(
ÆÆ  
$str
ÆÆ  E
,
ÆÆE F
count
ÆÆG L
,
ÆÆL M
item
ÆÆN R
.
ÆÆR S
OrderNo
ÆÆS Z
,
ÆÆZ [
Convert
ÆÆ\ c
.
ÆÆc d

ToDateTime
ÆÆd n
(
ÆÆn o
item
ÆÆo s
.
ÆÆs t
	OrderDate
ÆÆt }
)
ÆÆ} ~
,
ÆÆ~ 
itemÆÆÄ Ñ
.ÆÆÑ Ö

TicketTypeÆÆÖ è
,ÆÆè ê
itemÆÆë ï
.ÆÆï ñ
	PurchaserÆÆñ ü
,ÆÆü †
itemÆÆ° •
.ÆÆ• ¶
NumberOfAdultÆÆ¶ ≥
,ÆÆ≥ ¥
itemÆÆµ π
.ÆÆπ ∫
NumberOfChildÆÆ∫ «
,ÆÆ« »
itemÆÆ… Õ
.ÆÆÕ Œ
StatusÆÆŒ ‘
,ÆÆ‘ ’
EnvironmentÆÆ÷ ·
.ÆÆ· ‚
NewLineÆÆ‚ È
)ÆÆÈ Í
;ÆÆÍ Î
count
ØØ 
++
ØØ 
;
ØØ 
}
∞∞ 
var
≥≥ 
response
≥≥ 
=
≥≥ 
System
≥≥ !
.
≥≥! "
Web
≥≥" %
.
≥≥% &
HttpContext
≥≥& 1
.
≥≥1 2
Current
≥≥2 9
.
≥≥9 :
Response
≥≥: B
;
≥≥B C
response
¥¥ 
.
¥¥ 
BufferOutput
¥¥ !
=
¥¥" #
true
¥¥$ (
;
¥¥( )
response
µµ 
.
µµ 
Clear
µµ 
(
µµ 
)
µµ 
;
µµ 
response
∂∂ 
.
∂∂ 
ClearHeaders
∂∂ !
(
∂∂! "
)
∂∂" #
;
∂∂# $
response
∑∑ 
.
∑∑ 
ContentEncoding
∑∑ $
=
∑∑% &
Encoding
∑∑' /
.
∑∑/ 0
Unicode
∑∑0 7
;
∑∑7 8
string
ππ 
csvFileName
ππ 
=
ππ  
$str
ππ! 7
+
ππ8 9
DateTime
ππ: B
.
ππB C
Today
ππC H
.
ππH I
Date
ππI M
.
ππM N
ToString
ππN V
(
ππV W
$str
ππW d
)
ππd e
+
ππf g
$str
ππh n
;
ππn o
response
∫∫ 
.
∫∫ 
	AddHeader
∫∫ 
(
∫∫ 
$str
∫∫ 4
,
∫∫4 5
$str
∫∫6 L
+
∫∫M N
csvFileName
∫∫O Z
)
∫∫Z [
;
∫∫[ \
response
ªª 
.
ªª 
ContentType
ªª  
=
ªª! "
$str
ªª# /
;
ªª/ 0
response
ºº 
.
ºº 
Write
ºº 
(
ºº 
sb
ºº 
.
ºº 
ToString
ºº &
(
ºº& '
)
ºº' (
)
ºº( )
;
ºº) *
response
ΩΩ 
.
ΩΩ 
End
ΩΩ 
(
ΩΩ 
)
ΩΩ 
;
ΩΩ 
return
øø 
RedirectToAction
øø #
(
øø# $
$str
øø$ ,
,
øø, -
$str
øø. 6
)
øø6 7
;
øø7 8
}
¿¿ 	
}
¡¡ 
public
¬¬ 

class
¬¬ %
DataConversionForUpdate
¬¬ (
{
√√ 
public
ƒƒ 
string
ƒƒ 
OrderId
ƒƒ 
{
ƒƒ 
get
ƒƒ  #
;
ƒƒ# $
set
ƒƒ% (
;
ƒƒ( )
}
ƒƒ* +
public
≈≈ 
string
≈≈ 
UserId
≈≈ 
{
≈≈ 
get
≈≈ "
;
≈≈" #
set
≈≈$ '
;
≈≈' (
}
≈≈) *
public
∆∆ 
string
∆∆ 
	FirstName
∆∆ 
{
∆∆  !
get
∆∆" %
;
∆∆% &
set
∆∆' *
;
∆∆* +
}
∆∆, -
public
«« 
string
«« 
LastName
«« 
{
««  
get
««! $
;
««$ %
set
««& )
;
««) *
}
««+ ,
public
»» 
string
»» 
Email
»» 
{
»» 
get
»» !
;
»»! "
set
»»# &
;
»»& '
}
»»( )
public
…… 
string
…… 
Phone
…… 
{
…… 
get
…… !
;
……! "
set
……# &
;
……& '
}
……( )
public
   
string
   
Adult
   
{
   
get
   !
;
  ! "
set
  # &
;
  & '
}
  ( )
public
ÀÀ 
string
ÀÀ 
Child
ÀÀ 
{
ÀÀ 
get
ÀÀ !
;
ÀÀ! "
set
ÀÀ# &
;
ÀÀ& '
}
ÀÀ( )
public
ÃÃ 
string
ÃÃ 
TotalAmount
ÃÃ !
{
ÃÃ" #
get
ÃÃ$ '
;
ÃÃ' (
set
ÃÃ) ,
;
ÃÃ, -
}
ÃÃ. /
}
ŒŒ 
}““ ı+
mD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Controllers\UserController.cs
	namespace

 	
BusTicketWebApp


 
.

 
Controllers

 %
{ 
public 

class 
UserController 
:  !

Controller" ,
{ 
public 
ActionResult 
Index !
(! "
)" #
{ 	
ViewBag 
. 
Error 
= 
$str 
;  
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	$
ValidateAntiForgeryToken	 !
]! "
public 
ActionResult 
Login !
(! "
	UserLogin" +
	userLogin, 5
)5 6
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 
View 
( 
$str #
,# $
	userLogin$ -
)- .
;. /
} 
string 
email 
= 
	userLogin $
.$ %
UserName% -
;- .
string   
pwd   
=   
	userLogin   "
.  " #
Password  # +
;  + ,
string"" 
authApiBaseUrl"" !
=""" #
$str""$ W
;""W X
string## 
authUri## 
=## 
authApiBaseUrl## +
+##, -
$str##. H
+##I J
email##K P
+##Q R
$str##S Z
+##[ \
pwd##] `
;##` a
bool$$ 
result$$ 
=$$ 
false$$ 
;$$  
try%% 
{&& 
HttpWebRequest'' 
httpWebRequest'' -
=''. /
(''0 1
HttpWebRequest''1 ?
)''? @
HttpWebRequest''@ N
.''N O
Create''O U
(''U V
authUri''V ]
)''] ^
;''^ _
httpWebRequest(( 
.(( 
Method(( %
=((& '
$str((( -
;((- .
WebResponse** 
response** $
=**% &
httpWebRequest**' 5
.**5 6
GetResponse**6 A
(**A B
)**B C
as**D F
WebResponse**G R
;**R S
byte++ 
[++ 
]++ 

resultByte++ !
=++" #
new++$ '
byte++( ,
[++, -
response++- 5
.++5 6
ContentLength++6 C
]++C D
;++D E
var,, 
stream,, 
=,, 
response,, %
.,,% &
GetResponseStream,,& 7
(,,7 8
),,8 9
;,,9 :
stream-- 
.-- 
Read-- 
(-- 

resultByte-- &
,--& '
$num--( )
,--) *

resultByte--+ 5
.--5 6
Length--6 <
)--< =
;--= >
stream.. 
... 
Flush.. 
(.. 
).. 
;.. 
result// 
=// 
Convert//  
.//  !
	ToBoolean//! *
(//* +
System//+ 1
.//1 2
Text//2 6
.//6 7
Encoding//7 ?
.//? @
Default//@ G
.//G H
	GetString//H Q
(//Q R

resultByte//R \
)//\ ]
)//] ^
;//^ _
stream11 
.11 
Close11 
(11 
)11 
;11 
}22 
catch33 
(33 
	Exception33 
ex33 
)33  
{44 
}66 
if77 
(77 
result77 
)77 
{88 
Session99 
[99 
$str99 
]99  
=99! "
email99# (
;99( )
Session:: 
[:: 
$str:: '
]::' (
=::) *
email::+ 0
;::0 1
return;; 
RedirectToAction;; '
(;;' (
$str;;( /
,;;/ 0
$str;;0 8
);;8 9
;;;9 :
}<< 
else== 
{>> 
ViewBag?? 
.?? 
Error?? 
=?? 
$str??  ,
;??, -
return@@ 
RedirectToAction@@ '
(@@' (
$str@@( /
)@@/ 0
;@@0 1
}AA 
}BB 	
publicDD 
ActionResultDD 
LogoutDD "
(DD" #
)DD# $
{EE 	
SessionFF 
[FF 
$strFF 
]FF 
=FF 
nullFF #
;FF# $
SessionGG 
[GG 
$strGG 
]GG 
=GG 
nullGG "
;GG" #
SessionHH 
[HH 
$strHH #
]HH# $
=HH% &
nullHH' +
;HH+ ,
returnII 
RedirectToActionII #
(II# $
$strII$ +
)II+ ,
;II, -
}JJ 	
publicLL 

JsonResultLL 
RemoveDisplayLL '
(LL' (
)LL( )
{MM 	
SessionNN 
[NN 
$strNN #
]NN# $
=NN% &
nullNN' +
;NN+ ,
returnOO 
JsonOO 
(OO 
$strOO 
,OO 
JsonRequestBehaviorOO .
.OO. /
AllowGetOO/ 7
)OO7 8
;OO8 9
}PP 	
}RR 
}SS ∏
gD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Dtos\MemberSearchDto.cs
	namespace 	
BusTicketWebApp
 
. 
Dtos 
{ 
public 

class 
MemberSearchDto  
{		 
public

 
string

 
	FirstName

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
FromDate 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ToDate 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
StatusId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
MemberId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
FromToRegDate #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} Ô
gD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Dtos\MemberUpdateDto.cs
	namespace 	
BusTicketWebApp
 
. 
Dtos 
{ 
public 

class 
MemberUpdateDto  
{		 
public

 
string

 
Status

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
string 
Message 
{ 
get  #
;# $
set% (
;( )
}* +
public 
MemberUpdateData 

UpdateData  *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
public 

class 
MemberUpdateData !
{ 
public 
string 
	UpdatedAt 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 

TotalPrice  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
UpdatedMemberId "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} Ï
jD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Dtos\OperationResultDto.cs
	namespace 	
BusTicketWebApp
 
. 
Dtos 
{ 
public 

class 
OperationResultDto #
{		 
public

 
string

 
Status

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
string 
Message 
{ 
get  #
;# $
set% (
;( )
}* +
public 

UpdateData 

UpdateData $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
public 

class 

UpdateData 
{ 
public 
string 
	UpdatedAt 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
CustomerName "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 

TotalPrice  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
UpdatedOrderId !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} Ø
fD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Dtos\OrderSearchDto.cs
	namespace 	
BusTicketWebApp
 
. 
Dtos 
{ 
public 

class 
OrderSearchDto 
{		 
public

 
string

 
OrderNo

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
string 

GmoOrderNo  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
PaymentMethodType '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
	Telephone 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
OrderFromDate #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
OrderToDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
MemberId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
RoutesId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
FlightId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
DateOfUseFrom #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public   
string   
DateOfUseTo   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public!! 
string!! 
DateOfuse_From_To!! '
{!!( )
get!!* -
;!!- .
set!!/ 2
;!!2 3
}!!4 5
public"" 
string"" 
OrderDateFromTo"" %
{""& '
get""( +
;""+ ,
set""- 0
;""0 1
}""2 3
public## 
string## 
OrderIds## 
{##  
get##! $
;##$ %
set##& )
;##) *
}##+ ,
public$$ 
string$$ 
IsViewDownload$$ $
{$$% &
get$$' *
;$$* +
set$$, /
;$$/ 0
}$$1 2
public%% 
string%% 
MemberStatus%% "
{%%# $
get%%% (
;%%( )
set%%* -
;%%- .
}%%/ 0
}&& 
}'' ˝*
_D:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Dtos\Utility.cs
	namespace 	
BusTicketWebApp
 
. 
Dtos 
{		 
public

 

class

 
Utility

 
{ 
private 
string 
_connectionString (
=) * 
ConfigurationManager+ ?
.? @
ConnectionStrings@ Q
[Q R
$strR `
]` a
.a b
ConnectionStringb r
;r s
public 
static 
List 
< 
PaymentMethod (
>( )
GetPaymentMethods* ;
(; <
)< =
{ 	
return 
new 
List 
< 
PaymentMethod )
>) *
{ 
new 
PaymentMethod %
{% &
Id& (
=( )
$num) *
,* +
PaymentMethodName+ <
=< =
$str= O
}O P
,P Q
new 
PaymentMethod %
{% &
Id& (
=( )
$num) *
,* +
PaymentMethodName+ <
=< =
$str= O
}O P
,P Q
} 
; 
} 	
public 
static 
List 
< 

TicketType %
>% &
GetTicketTypes' 5
(5 6
)6 7
{ 	
return 
new 
List 
< 

TicketType &
>& '
{ 
new 

TicketType "
{" #
Id# %
=% &
$num& '
,' (
TypeName( 0
=0 1
$str1 ;
}; <
,< =
} 
; 
} 	
public!! 
static!! 
List!! 
<!! 
int!! 
>!! 
GetAdultNumbers!!  /
(!!/ 0
)!!0 1
{"" 	
return$$ 
new$$ 
List$$ 
<$$ 
int$$ 
>$$  
{%% 
$num&& 
,&& 
$num&& 
,&& 
$num&& 
,&& 
$num&& 
,&& 
$num&& 
,&& 
$num&& 
,&& 
$num&&  
,&&  !
$num&&! "
,&&" #
$num&&# $
,&&$ %
$num&&% '
}'' 
;'' 
}(( 	
public)) 
static)) 
List)) 
<)) 
int)) 
>)) 
GetChildNumbers))  /
())/ 0
)))0 1
{** 	
return,, 
new,, 
List,, 
<,, 
int,, 
>,,  
{-- 
$num.. 
,.. 
$num.. 
,.. 
$num.. 
,.. 
$num.. 
,.. 
$num.. 
,.. 
$num.. 
,.. 
$num..  
,..  !
$num..! "
,.." #
$num..# $
,..$ %
$num..% &
}// 
;// 
}00 	
public11 
static11 
string11 
GetCustomDate11 *
(11* +
string11+ 1
strReceivedDate112 A
)11A B
{22 	
string33 
strReturnDate33  
=33! "
$str33# %
;33% &
if44 
(44 
!44 
string44 
.44 
IsNullOrEmpty44 %
(44% &
strReturnDate44& 3
)443 4
)444 5
{55 
DateTime66 
strTmpReceivedDate66 +
=66, -
Convert66. 5
.665 6

ToDateTime666 @
(66@ A
strReceivedDate66A P
)66P Q
;66Q R
int77 
intReceivedDay77 "
=77# $
strTmpReceivedDate77% 7
.777 8
Day778 ;
;77; <
string88 
strReceivedMonth88 '
=88( )
getAbbreviatedName88* <
(88< =
strTmpReceivedDate88= O
.88O P
Month88P U
,88U V
strReceivedDate88W f
)88f g
;88g h
strReturnDate99 
=99 
intReceivedDay99  .
+99/ 0
$str991 4
+995 6
strReceivedMonth997 G
+99H I
$str99J M
+99N O
strTmpReceivedDate99P b
.99b c
Year99c g
;99g h
}:: 
else;; 
{<< 
return== 
$str== 0
;==0 1
}>> 
return@@ 
strReturnDate@@  
;@@  !
}AA 	
staticBB 
stringBB 
getAbbreviatedNameBB (
(BB( )
intBB) ,
monthBB- 2
,BB2 3
stringBB4 :
strReceivedDateBB; J
)BBJ K
{CC 	
DateTimeDD 
dateDD 
=DD 
newDD 
DateTimeDD  (
(DD( )
ConvertDD) 0
.DD0 1

ToDateTimeDD1 ;
(DD; <
strReceivedDateDD< K
)DDK L
.DDL M
YearDDM Q
,DDQ R
monthDDS X
,DDX Y
$numDDZ [
)DD[ \
;DD\ ]
returnFF 
dateFF 
.FF 
ToStringFF  
(FF  !
$strFF! &
)FF& '
;FF' (
}GG 	
}HH 
}II å	
^D:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Global.asax.cs
	namespace		 	
BusTicketWebApp		
 
{

 
public 

class 
MvcApplication 
:  !
System" (
.( )
Web) ,
., -
HttpApplication- <
{ 
	protected 
void 
Application_Start (
(( )
)) *
{ 	
AreaRegistration 
. 
RegisterAllAreas -
(- .
). /
;/ 0
FilterConfig 
. !
RegisterGlobalFilters .
(. /
GlobalFilters/ <
.< =
Filters= D
)D E
;E F
RouteConfig 
. 
RegisterRoutes &
(& '

RouteTable' 1
.1 2
Routes2 8
)8 9
;9 :
BundleConfig 
. 
RegisterBundles (
(( )
BundleTable) 4
.4 5
Bundles5 <
)< =
;= >
} 	
} 
} ‹
`D:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\Member.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 
Member 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 

CreateDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
Status 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
	StatusTxt 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LoginPassword #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 

DeviceName  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
	UserAgent 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ±
kD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\MemberHistoryList.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 
MemberHistoryList "
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 

CreateDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

UpdateDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
Status 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
	IsUpdated 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ó
dD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\MemberList.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 

MemberList 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 

CreateDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
ActiveStatus 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
TotalPurchase  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
Status 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
	IsUpdated 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

TotalPrice  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

UpdateDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 

TotalOrder 
{ 
get  #
;# $
set% (
;( )
}* +
}   
}!! ®4
_D:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\Order.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 
Order 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
int 
ElectronicTicketId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
BoardingDate $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
	ExpiredAt 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DateTime 
	OrderDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Route 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
OrderNo 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 

GmoOrderNo  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Flight 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
PaymentMethod #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
BoardingPlace #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
MemberId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Telephone 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
TicketTypeId 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 

TicketName  
{! "
get# &
;& '
set( +
;+ ,
}- .
public!! 
int!! 
PaymentMethodType!! $
{!!% &
get!!' *
;!!* +
set!!, /
;!!/ 0
}!!1 2
public## 
string## 

DeviceType##  
{##! "
get### &
;##& '
set##( +
;##+ ,
}##- .
public$$ 
string$$ 

DeviceName$$  
{$$! "
get$$# &
;$$& '
set$$( +
;$$+ ,
}$$- .
public%% 
string%% 
	UserAgent%% 
{%%  !
get%%" %
;%%% &
set%%' *
;%%* +
}%%, -
public'' 
int'' 
NumberOfAdult''  
{''! "
get''# &
;''& '
set''( +
;''+ ,
}''- .
public)) 
int)) 
NumberOfChild))  
{))! "
get))# &
;))& '
set))( +
;))+ ,
}))- .
public++ 
decimal++ 

TotalPrice++ !
{++" #
get++$ '
;++' (
set++) ,
;++, -
}++. /
public-- 
decimal-- 
PriceForAdult-- $
{--% &
get--' *
;--* +
set--, /
;--/ 0
}--1 2
public// 
decimal// 
PriceForChild// $
{//% &
get//' *
;//* +
set//, /
;/// 0
}//1 2
public11 
string11 
UserId11 
{11 
get11 "
;11" #
set11$ '
;11' (
}11) *
public33 
decimal33 
CancellationFee33 &
{33' (
get33) ,
;33, -
set33. 1
;331 2
}333 4
public66 
DateTime66 
?66 
BoardingFromDate66 )
{66* +
get66, /
;66/ 0
set661 4
;664 5
}666 7
public77 
DateTime77 
?77 
BoardingToDate77 '
{77( )
get77* -
;77- .
set77/ 2
;772 3
}774 5
public88 
DateTime88 
?88 
OrderFromDate88 &
{88' (
get88) ,
;88, -
set88. 1
;881 2
}883 4
public99 
DateTime99 
?99 
OrderToDate99 $
{99% &
get99' *
;99* +
set99, /
;99/ 0
}991 2
public;; 
string;; 
OrderDateFromTo;; %
{;;& '
get;;( +
;;;+ ,
set;;- 0
;;;0 1
};;2 3
public<< 
string<< 
DateOfUseFrom<< #
{<<$ %
get<<& )
;<<) *
set<<+ .
;<<. /
}<<0 1
public== 
string== 
DateOfUseTo== !
{==" #
get==$ '
;==' (
set==) ,
;==, -
}==. /
public>> 
string>> 
DateOfuse_From_To>> '
{>>( )
get>>* -
;>>- .
set>>/ 2
;>>2 3
}>>4 5
public?? 
string?? 
OrderIds?? 
{??  
get??! $
;??$ %
set??& )
;??) *
}??+ ,
}@@ 
}AA ≠
jD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\OrderHistoryList.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 
OrderHistoryList !
{		 
public

 
int

 
OrderId

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public 
string 
OrderNo 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
	OrderDate 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 

UpdateDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Telephone 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
numberOfAdult  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
numberOfChild  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 

TotalPrice !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	DateOfUse 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} 
gD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\PaymentMethod.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 
PaymentMethod 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
PaymentMethodName '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} „
dD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\SearchList.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 

SearchList 
{		 
public

 
string

 
OrderId

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
string 
OrderNo 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
	OrderDate 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 

TicketType  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
	Purchaser 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
NumberOfChild #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
NumberOfAdult #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
	DateOfUse 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
StatusId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	IsUpdated 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 

UpdateDate  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
MemberStatus "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} Á
fD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\TicketStatus.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 
TicketStatus 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 

statusName  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ·
dD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\TicketType.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public 

class 

TicketType 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
TypeName 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ‘
cD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Models\UserLogin.cs
	namespace 	
BusTicketWebApp
 
. 
Models  
{ 
public		 

class		 
	UserLogin		 
{

 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str 
)  
]  !
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ï
jD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str *
)* +
]+ ,
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str ,
), -
]- .
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
["" 
assembly"" 	
:""	 

AssemblyVersion"" 
("" 
$str"" $
)""$ %
]""% &
[## 
assembly## 	
:##	 

AssemblyFileVersion## 
(## 
$str## (
)##( )
]##) *º
sD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\ViewModels\MemberSearchViewModel.cs
	namespace 	
BusTicketWebApp
 
. 

ViewModels $
{ 
public 

class !
MemberSearchViewModel &
{		 
public

 
DateTime

 
MemberFromRegDate

 )
{

* +
get

, /
;

/ 0
set

1 4
;

4 5
}

6 7
public 
DateTime 
MemberToRegDate '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
MemberEmail !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
MemberStatus 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
MemberFirstName %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
MemberLastName $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
MemberPhone !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} å
sD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\ViewModels\OrderHistoryViewModel.cs
	namespace 	
BusTicketWebApp
 
. 

ViewModels $
{ 
public 

class !
OrderHistoryViewModel &
{		 
public

 
int

 
OrderId

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public 
string 
OrderNo 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
	OrderDate 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
	UpdatedAt 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Telephone 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
Adult 
{ 
get 
; 
set  #
;# $
}% &
public 
int 
Child 
{ 
get 
; 
set  #
;# $
}% &
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} î

lD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\ViewModels\OrderViewModel.cs
	namespace 	
BusTicketWebApp
 
. 

ViewModels $
{ 
public		 

class		 
OrderViewModel		 
{

 
public 
Order 
Order 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
PaymentMethod !
>! "
PaymentMethods# 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
List 
< 

TicketType 
> 
TicketTypes  +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
List 
< 
int 
> 
Childs 
{  !
get" %
;% &
set' *
;* +
}, -
public 
List 
< 
int 
> 
Adults 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ∆
mD:\Sudipto\JabaIT\Japan Project\My Work\Project\BusTicketWebApp\BusTicketWebApp\ViewModels\SearchViewModel.cs
	namespace 	
BusTicketWebApp
 
. 

ViewModels $
{ 
public		 

class		 
SearchViewModel		  
{

 
public 
List 
< 
PaymentMethod !
>! "
PaymentMethods# 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
List 
< 

TicketType 
> 
TicketTypes  +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
List 
< 
TicketStatus  
>  !
TicketStatus" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} 